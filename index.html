<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>KillerX Ultra Premium</title>
<!-- Firebase SDK scripts -->
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
<!-- bcryptjs and firebase-auth-compat.js REMOVED -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<style>
  :root {
    --primary: #6c5ce7; /* Purple */
    --primary-dark: #5649c0;
    --secondary: #00cec9; /* Teal/Cyan */
    --danger: #ff7675; /* Red */
    --success: #00b894;
    --warning: #fdcb6e; /* Yellow */
    --dark: #2d3436;
    --light: #f5f6fa;
    --gradient-blue-purple: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); 
    --gradient-teal-blue: linear-gradient(135deg, #00cec9 0%, #2575fc 100%); 
    --gradient-red-orange: linear-gradient(135deg, #ff4e81 0%, #fdbc4b 100%); 
    --gradient-orange-red: linear-gradient(135deg, #fdbc4b 0%, #ff4e81 100%); 
    --modal-bg-dark: rgba(30, 39, 46, 0.98);

    /* New Auth Page Colors */
    --auth-bg: #1a1d21;
    --auth-box-bg: #23272c;
    --auth-left-panel-bg: #1e2125;
    --auth-input-bg: #2c3036;
    --auth-input-border: #3a3f45;
    --auth-text-primary: #ffffff;
    --auth-text-secondary: #ccc;
    --auth-accent: #ff8c00; 
  }
  
  * { margin: 0; padding: 0; box-sizing: border-box; }
  
  body {
    font-family: 'Poppins', sans-serif; color: var(--light); min-height: 100vh;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden; position: relative;
    background: radial-gradient(circle at center, #1b1b1b 0%, #0d0d0d 100%); 
  }

  .liquid-bg {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    z-index: -1; overflow: hidden; opacity: 0; visibility: hidden;
    transition: opacity 1s ease, visibility 1s ease; 
  }
  .liquid-bg.active { opacity: 1; visibility: visible; }
  .liquid-blob {
    position: absolute; border-radius: 50%; filter: blur(100px); 
    opacity: 0.7; mix-blend-mode: screen;
    animation: float 25s infinite ease-in-out; will-change: transform;
  }
  #loginBg .liquid-blob:nth-child(1) { background: radial-gradient(circle, rgba(108, 92, 231, 0.15) 0%, rgba(45, 30, 100, 0.15) 100%); width: 800px; height: 800px; left: -150px; top: -150px; animation-delay: 0s; animation-duration: 20s; }
  #loginBg .liquid-blob:nth-child(2) { background: radial-gradient(circle, rgba(0, 206, 201, 0.15) 0%, rgba(0, 100, 90, 0.15) 100%); width: 600px; height: 600px; right: -100px; bottom: -100px; animation-delay: 5s; animation-duration: 25s; }
  #loginBg .liquid-blob:nth-child(3) { background: radial-gradient(circle, rgba(200, 100, 250, 0.15) 0%, rgba(80, 40, 100, 0.15) 100%); width: 700px; height: 700px; right: 100px; top: 200px; animation-delay: 10s; animation-duration: 30s; }
  #dashboardBg .liquid-blob:nth-child(1) { background: var(--gradient-blue-purple); width: 900px; height: 900px; left: -200px; top: -200px; animation-delay: 0s; animation-duration: 20s; }
  #dashboardBg .liquid-blob:nth-child(2) { background: linear-gradient(135deg, #00cec9 0%, #2575fc 100%); width: 700px; height: 700px; right: -150px; bottom: -150px; animation-delay: 5s; animation-duration: 25s; }
  #dashboardBg .liquid-blob:nth-child(3) { background: linear-gradient(135deg, #6a11cb 0%, #ff4e81 100%); width: 800px; height: 800px; right: 200px; top: 300px; animation-delay: 10s; animation-duration: 30s; }
  @keyframes float { 0%, 100% { transform: translate(0, 0) rotate(0deg); } 20% { transform: translate(100px, 150px) rotate(10deg); } 40% { transform: translate(-80px, 200px) rotate(-5deg); } 60% { transform: translate(120px, -100px) rotate(15deg); } 80% { transform: translate(-50px, -150px) rotate(-10deg); } }

  /* Content panel and auth styles are the same as your V6, just simplified auth form below */
   .content-panel {
    text-align: center; width: 95%; position: relative; overflow: hidden; z-index: 1;
    animation: fadeInUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    display: flex; flex-direction: column; justify-content: center; align-items: center;
  }
  @keyframes fadeInUp { 0% { opacity: 0; transform: translateY(20px); } 100% { opacity: 1; transform: translateY(0); } }

  #authContainer {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    background-color: var(--auth-bg); display: flex; justify-content: center; align-items: center;
    z-index: 100; opacity: 0; visibility: hidden;
    transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
    font-family: 'Poppins', sans-serif;
  }
  #authContainer.visible { opacity: 1; visibility: visible; }
  .auth-box {
    display: flex; width: 90%; max-width: 900px; min-height: 500px; /* Adjusted min-height */
    background-color: var(--auth-box-bg); border-radius: 10px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5); overflow: hidden; 
    animation: fadeInUpAuth 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  @keyframes fadeInUpAuth { 0% { opacity: 0; transform: translateY(30px) scale(0.98); } 100% { opacity: 1; transform: translateY(0) scale(1); } }
  .auth-left-panel {
    flex: 1.2; background-color: var(--auth-left-panel-bg); padding: 40px 30px;
    display: flex; flex-direction: column; justify-content: center; align-items: center; 
    border-top-left-radius: 10px; border-bottom-left-radius: 10px;
  }
  .auth-left-panel img.auth-logo {
    width: 120px; height: 120px; object-fit: cover; border-radius: 50%; 
    margin-bottom: 30px; box-shadow: 0 0 20px rgba(0, 206, 201, 0.3), 0 0 10px var(--auth-accent);
    animation: floatAuthLogo 4s ease-in-out infinite; 
  }
  @keyframes floatAuthLogo { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-8px) rotate(1deg); } }
  .auth-left-panel h2 { color: var(--auth-text-primary); font-size: 22px; font-weight: 600; margin-bottom: 25px; text-align: center; }
  .auth-left-panel ul { color: var(--auth-text-secondary); list-style: none; padding-left: 0; width: 100%; max-width: 300px; }
  .auth-left-panel ul li { margin-bottom: 12px; display: flex; align-items: center; font-size: 14px; }
  .auth-left-panel ul li i { margin-right: 10px; color: var(--auth-accent); font-size: 12px; }
  .auth-right-panel {
    flex: 1; padding: 30px 40px; 
    display: flex; flex-direction: column; justify-content: center;
    background-color: var(--auth-box-bg); 
    border-top-right-radius: 10px; border-bottom-right-radius: 10px;
  }
  .auth-right-panel h1 { color: var(--auth-text-primary); font-size: 24px; font-weight: 600; margin-bottom: 25px; text-align: center; } /* Increased margin */
  .auth-form label { color: var(--auth-text-secondary); font-size: 13px; font-weight: 500; margin-bottom: 8px; display: block; } /* Increased margin */
  .auth-form .input-group { position: relative; margin-bottom: 20px; } /* Increased margin */
  .auth-form input[type="text"] { /* Only text input needed now */
    width: 100%; padding: 12px 15px; 
    background-color: var(--auth-input-bg); border: 1px solid var(--auth-input-border);
    border-radius: 6px; color: var(--auth-text-primary); font-size: 14px; outline: none;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }
  .auth-form input[type="text"]:focus { border-color: var(--auth-accent); box-shadow: 0 0 0 2px rgba(255, 140, 0, 0.2); }
  .auth-form input::placeholder { color: #777; }
  .auth-error-message { color: var(--danger); text-align: center; margin-bottom: 15px; font-size: 13px; min-height: 18px; } /* Increased margin */
  .auth-button {
    width: 100%; padding: 12px; background-color: var(--auth-accent);
    border: none; border-radius: 6px; color: var(--auth-text-primary);
    font-size: 15px; font-weight: 600; cursor: pointer; margin-top: 10px; margin-bottom: 15px;
    transition: background-color 0.3s ease, transform 0.2s ease;
  }
  .auth-button:hover { background-color: #e67e00; transform: translateY(-1px); }
  .auth-button:active { transform: translateY(0px); }
  .auth-button:disabled { background-color: #555; cursor: not-allowed; }


  @media (max-width: 768px) {
    .auth-box { flex-direction: column; width: 95%; max-width: 450px; min-height: 0; height: auto; }
    .auth-left-panel { border-radius: 10px 10px 0 0; padding: 30px 20px; display: none; } /* Hidden by default on mobile */
    .auth-right-panel { border-radius: 10px; padding: 25px 20px; } 
    .auth-left-panel.mobile-visible { display: block; flex: 0 0 auto; padding: 20px; }
    .auth-left-panel.mobile-visible h2 { font-size: 18px; margin-bottom: 15px;}
    .auth-left-panel.mobile-visible ul { display: none; } 
    .auth-left-panel.mobile-visible img.auth-logo { width: 80px; height: 80px; margin-bottom: 15px;}
    .auth-right-panel h1 { font-size: 20px; margin-bottom: 15px;}
    .auth-form input[type="text"] { padding: 10px 12px; font-size: 13px; margin-bottom: 15px;}
    .auth-button { padding: 10px; font-size: 14px; }
  }
  /* Dashboard Styles (Truncated for brevity, assume they are correct from V6) */
  #dashboardPanel { background: rgba(255, 255, 255, 0.08); /* ... rest of your dashboard styles ... */ }
  /* ... All other dashboard, sidebar, modal, bonus system, and responsive styles from your V6 file ... */
  /* Ensure all other styles from your USER V6.html are present here if needed */
  /* For brevity, I'm not repeating all of them, focusing on the auth change */
  /* --- Styles below are copied from your V6 for completeness of what was there --- */
  #dashboardPanel { background: rgba(255, 255, 255, 0.08); border-radius: 24px; padding: 20px; box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid transparent; max-width: 900px; width: 95%; position: relative; display: flex; flex-direction: column; align-items: center; min-height: 500px; transform: scale(0.95); opacity: 0; animation: dashboardEntrance 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards; }
  @keyframes dashboardEntrance { 0% { transform: scale(0.95); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
  #dashboardPanel::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; border-radius: 24px; z-index: -1; box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 10px rgba(0, 206, 201, 0.5), 0 0 20px rgba(108, 92, 231, 0.3); pointer-events: none; animation: borderPulse 6s infinite alternate; }
  @keyframes borderPulse { 0% { box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 10px rgba(0, 206, 201, 0.5), 0 0 20px rgba(108, 92, 231, 0.3); } 50% { box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 15px rgba(0, 206, 201, 0.7), 0 0 30px rgba(108, 92, 231, 0.5); } 100% { box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 10px rgba(0, 206, 201, 0.5), 0 0 20px rgba(108, 92, 231, 0.3); } }
  .sidebar { position: fixed; top: 0; left: 0; height: 100%; width: 280px; background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 15px; transform: translateX(-100%); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 900; box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5); border-right: 1px solid rgba(255, 255, 255, 0.1); overflow-y: auto; scrollbar-width: none; -ms-overflow-style: none; }
  .sidebar::-webkit-scrollbar { display: none; }
  .sidebar.active { transform: translateX(0); }
  .sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 899; display: none; transition: opacity 0.3s ease; opacity: 0; }
  .sidebar-overlay.active { display: block; opacity: 1; }
  .close-sidebar-btn { position: absolute; top: 15px; right: 15px; background: rgba(255, 255, 255, 0.15); border: none; border-radius: 50%; width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; color: white; font-size: 18px; cursor: pointer; transition: all 0.3s ease; z-index: 100; animation: pulse 2s infinite; }
  @keyframes pulse { 0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.2); } 50% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); } }
  .close-sidebar-btn:hover { background: rgba(255, 255, 255, 0.25); transform: scale(1.1); animation: none; }
  .sidebar-title { font-size: 24px; font-weight: 600; color: #fff; margin-bottom: 20px; padding-top: 20px; text-align: center; position: relative; width: 100%; animation: textGlow 3s ease-in-out infinite alternate; }
  @keyframes textGlow { 0% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.1), 0 0 20px rgba(108, 92, 231, 0.1); } 100% { text-shadow: 0 0 15px rgba(255, 255, 255, 0.2), 0 0 30px rgba(108, 92, 231, 0.3); } }
  .sidebar-title::after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 50px; height: 2px; background: var(--secondary); border-radius: 2px; animation: linePulse 2s infinite ease-in-out; }
  @keyframes linePulse { 0%, 100% { width: 60px; opacity: 1; } 50% { width: 80px; opacity: 0.8; } }
  .menu-toggle-btn { position: absolute; top: 20px; left: 20px; width: 40px; height: 40px; padding: 0; border-radius: 50%; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 0 10px rgba(106, 17, 203, 0.3); display: flex; justify-content: center; align-items: center; color: var(--light); font-size: 20px; cursor: pointer; transition: all 0.3s ease; z-index: 50; animation: pulse 2s infinite; }
  .menu-toggle-btn:hover { background: rgba(255, 255, 255, 0.2); box-shadow: 0 0 20px rgba(106, 17, 203, 0.6); transform: scale(1.1); animation: none; }
  .notification-wrapper-main { position: absolute; top: 20px; right: 20px; z-index: 50; }
  .notification-wrapper-main .notification-btn { width: 35px; height: 35px; padding: 0; border-radius: 50%; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 0 10px rgba(106, 17, 203, 0.3); animation: pulse 2s infinite; display: flex; justify-content: center; align-items: center; position: relative; cursor: pointer; transition: all 0.3s ease; }
  .notification-wrapper-main .notification-btn i { font-size: 18px; color: var(--warning); }
  .notification-wrapper-main .notification-btn:hover { background: rgba(255, 255, 255, 0.2); box-shadow: 0 0 20px rgba(106, 17, 203, 0.6); transform: scale(1.1); animation: none; }
  .notification-wrapper-main .notification-btn span { position: absolute; top: 0px; right: 0px; background: var(--danger); color: white; font-size: 10px; font-weight: 600; border-radius: 50%; padding: 2px 5px; min-width: 18px; height: 18px; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 5px rgba(255, 118, 117, 0.7); animation: notificationPulse 1.5s infinite; }
  @keyframes notificationPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
  .main-dashboard-content { display: flex; flex-direction: column; align-items: flex-start; justify-content: flex-start; width: 100%; height: 100%; padding-top: 70px; animation: fadeIn 0.8s ease-out; overflow-y: auto; max-height: calc(100vh - 100px); scrollbar-width: none; -ms-overflow-style: none; }
  .main-dashboard-content::-webkit-scrollbar { display: none; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .dashboard-header { display: flex; align-items: center; justify-content: flex-start; width: 100%; margin-bottom: 20px; transition: all 0.3s ease; padding: 0 20px; }
  .dashboard-header:hover { transform: translateX(5px); }
  .profile-img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; box-shadow: 0 0 15px rgba(0, 206, 201, 0.5); border: 2px solid var(--secondary); transition: all 0.3s ease; animation: floatDashboardProfile 4s ease-in-out infinite; margin-right: 20px; }
  @keyframes floatDashboardProfile { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-10px) rotate(2deg); } }
  .killerx-title { font-size: 28px; font-weight: 700; color: transparent; background: var(--gradient-teal-blue); -webkit-background-clip: text; background-clip: text; text-align: left; line-height: 1.1; text-shadow: 0 0 10px rgba(0, 206, 201, 0.4); flex-grow: 1; transition: all 0.3s ease; }
  .killerx-title:hover { transform: translateX(5px); text-shadow: 0 0 15px rgba(0, 206, 201, 0.6); }
  .killerx-title span { display: block; font-size: 18px; font-weight: 500; color: rgba(255, 255, 255, 0.8); -webkit-background-clip: unset; background-clip: unset; text-shadow: none; }
  .dashboard-link { display: flex; align-items: center; gap: 8px; margin: 10px 0 5px 0; font-size: 16px; font-weight: 500; color: rgba(255, 255, 255, 0.9); align-self: flex-start; width: calc(100% - 40px); margin-left: 20px; margin-right: 20px; transition: all 0.3s ease; padding: 8px 15px; border-radius: 10px; }
  .dashboard-link:hover { background: rgba(255, 255, 255, 0.1); transform: translateX(10px); }
  .dashboard-link i { color: #999; transition: all 0.3s ease; }
  .dashboard-link:hover i { color: var(--secondary); }
  .user-id-display { font-size: 18px; color: #fff; font-weight: 600; margin-top: 10px; margin-bottom: 20px; width: calc(100% - 40px); margin-left: 20px; margin-right: 20px; text-align: center; transition: all 0.3s ease; padding: 10px; border-radius: 10px; background: rgba(255,255,255,0.03); }
  .user-id-display:hover { background: rgba(255, 255, 255, 0.05); transform: scale(1.02); }
  .user-id-display span { color: var(--secondary); font-weight: 700; transition: all 0.3s ease; }
  .user-id-display:hover span { text-shadow: 0 0 10px rgba(0, 206, 201, 0.5); }
  .hardware-id-section { display: flex; flex-direction: column; align-items: center; width: calc(100% - 40px); margin-left: 20px; margin-right: 20px; margin-bottom: 15px; transition: all 0.3s ease; }
  .hardware-id-section:hover { transform: translateY(-3px); }
  .hardware-id-label { font-size: 16px; font-weight: 500; color: rgba(255, 255, 255, 0.7); margin-bottom: 2px; white-space: nowrap; text-align: center; transition: all 0.3s ease; }
  .hardware-id-value { font-size: 18px; font-weight: 600; color: #fff; font-family: monospace; letter-spacing: 1px; text-align: center; overflow-wrap: break-word; padding: 10px 15px; border-radius: 10px; background: rgba(255, 255, 255, 0.05); transition: all 0.3s ease; width: 100%; }
  .hardware-id-value:hover { background: rgba(255, 255, 255, 0.1); box-shadow: 0 0 15px rgba(0, 206, 201, 0.2); }
  .balance-container { display: flex; flex-direction: column; align-items: center; width: 100%; margin-bottom: 25px; align-self: center; transition: all 0.3s ease; }
  .balance-container:hover { transform: translateY(-5px); }
  .points { font-size: 64px; font-weight: 700; margin: 0; background: var(--gradient-teal-blue); -webkit-background-clip: text; background-clip: text; color: transparent; text-shadow: 0 4px 10px rgba(0, 206, 201, 0.3); position: relative; animation: pulse 2s infinite; }
  .status-text { font-size: 16px; font-weight: 500; color: var(--secondary); margin-top: 5px; margin-bottom: 2px; transition: all 0.3s ease; }
  .status-text:hover { text-shadow: 0 0 10px rgba(0, 206, 201, 0.5); }
  .expires-text { font-size: 18px; color: rgba(255, 255, 255, 0.9); margin-bottom: 5px; font-weight: 600; text-shadow: 0 0 5px rgba(0, 206, 201, 0.2); transition: all 0.3s ease; }
  .expires-text:hover { color: var(--secondary); text-shadow: 0 0 15px rgba(0, 206, 201, 0.4); }
  .balance-label { font-size: 14px; font-weight: 600; color: rgba(255, 255, 255, 0.7); letter-spacing: 1px; margin-top: 0; margin-bottom: 5px; transition: all 0.3s ease; }
  .balance-label:hover { color: var(--secondary); }
  .premium-dashboard-button { width: 100%; padding: 16px; border: none; border-radius: 12px; color: #fff; font-size: 16px; font-weight: 500; cursor: pointer; transition: all 0.3s ease; margin-bottom: 12px; display: flex; align-items: center; justify-content: center; gap: 8px; position: relative; overflow: hidden; z-index: 1; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); box-shadow: 0 0 10px rgba(0, 206, 201, 0.3), 0 0 20px rgba(108, 92, 231, 0.2); transform: perspective(500px) translateZ(0); }
  .sidebar .premium-dashboard-button:not(.logout-btn) { background: var(--gradient-red-orange); box-shadow: 0 4px 15px rgba(255, 78, 129, 0.3); border: none; animation: buttonPulseSidebar 2s infinite ease-in-out; }
  @keyframes buttonPulseSidebar { 0%, 100% { transform: scale(1); box-shadow: 0 4px 15px rgba(255, 78, 129, 0.3); } 50% { transform: scale(1.02); box-shadow: 0 6px 20px rgba(255, 78, 129, 0.5); } }
  .sidebar .premium-dashboard-button:not(.logout-btn):hover { background: var(--gradient-orange-red); box-shadow: 0 8px 25px rgba(255, 78, 129, 0.5); transform: translateY(-3px) perspective(500px) translateZ(20px); animation: none; }
  .sidebar .premium-dashboard-button:not(.logout-btn) i { color: white !important; }
  #paymentOptionsModal .premium-dashboard-button { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 15px rgba(0,0,0,0.2); animation: none; justify-content: flex-start; padding-left: 20px; }
  #paymentOptionsModal .premium-dashboard-button:hover { background: rgba(255, 255, 255, 0.2); box-shadow: 0 6px 20px rgba(0,0,0,0.3); transform: translateY(-2px) perspective(500px) translateZ(15px); }
  #paymentOptionsModal .premium-dashboard-button img { filter: brightness(0) invert(1); }
  .premium-dashboard-button:last-of-type { margin-bottom: 0; }
  .premium-dashboard-button::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.05) 100%); transform: translateX(-100%); transition: transform 0.6s ease; z-index: -1; }
  .premium-dashboard-button:hover::before { transform: translateX(100%); }
  .premium-dashboard-button:hover { transform: translateY(-3px) perspective(500px) translateZ(20px); box-shadow: 0 0 15px rgba(0, 206, 201, 0.6), 0 0 30px rgba(108, 92, 231, 0.4); background: rgba(255, 255, 255, 0.1); }
  .premium-dashboard-button:active { transform: translateY(-1px) perspective(500px) translateZ(10px); box-shadow: 0 0 8px rgba(0, 206, 201, 0.3), 0 0 15px rgba(108, 92, 231, 0.2); }
  .premium-dashboard-button i { color: var(--secondary); transition: all 0.3s ease; }
  .premium-dashboard-button:hover i { transform: scale(1.2); }
  .add-money i { color: var(--secondary); } .hwid-reset-btn i { color: var(--primary); } .download-tools-btn i { color: var(--secondary); } .logout-btn i { color: var(--danger); } .history-btn i { color: white !important; }
  .redeem-section-wrapper { width: calc(100% - 40px); max-width: 600px; margin: 20px auto; padding: 20px; background-color: rgba(0,0,0,0.15); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.05); }
  .redeem-section-wrapper h3 { font-size: 18px; color: var(--light); margin-bottom: 8px; text-align: left; font-weight: 600; }
  .redeem-section-wrapper p { font-size: 13px; color: rgba(255,255,255,0.7); margin-bottom: 20px; text-align: left; line-height: 1.5; }
  .redeem-input-container { display: flex; align-items: center; border: 1px solid var(--auth-accent); border-radius: 8px; background-color: rgba(0,0,0,0.2); padding-left: 15px; overflow: hidden; }
  .redeem-input-container i.fa-gift { color: var(--auth-accent); margin-right: 12px; font-size: 18px; }
  #redeemCodeInput { flex-grow: 1; padding: 14px 10px; border: none; background: transparent; color: white; font-size: 15px; outline: none; }
  #redeemCodeInput::placeholder { color: rgba(255,255,255,0.5); }
  .redeem-input-container button { padding: 14px 25px; background-color: var(--auth-accent); color: white; border: none; font-weight: 600; font-size: 14px; cursor: pointer; transition: background-color 0.3s ease; letter-spacing: 0.5px; }
  .redeem-input-container button:hover { background-color: #e67e00; }
  .overview-card-standalone { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); display: flex; flex-direction: column; align-items: flex-start; text-align: left; width: calc(100% - 40px); margin-left: 20px; margin-right: 20px; margin-top: 25px; margin-bottom: 25px; align-self: center; transition: all 0.3s ease; transform: perspective(1000px) rotateX(0deg); }
  .overview-card-standalone:hover { transform: perspective(1000px) rotateX(5deg); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4); background: rgba(255, 255, 255, 0.08); }
  .overview-card-standalone .card-title { font-size: 18px; font-weight: 600; background: var(--gradient-blue-purple); -webkit-background-clip: text; background-clip: text; color: transparent; margin-bottom: 10px; transition: all 0.3s ease; }
  .overview-card-standalone:hover .card-title { text-shadow: 0 0 15px rgba(106, 17, 203, 0.5); }
  .overview-card-standalone .card-text { font-size: 14px; color: rgba(255, 255, 255, 0.7); margin-bottom: 10px; line-height: 1.5; transition: all 0.3s ease; }
  .overview-card-standalone:hover .card-text { color: rgba(255, 255, 255, 0.9); }
  .overview-card-standalone .contact-info { font-size: 14px; color: rgba(255, 255, 255, 0.8); display: flex; flex-direction: column; gap: 5px; margin-top: 10px; }
  .overview-card-standalone .contact-info a { color: var(--secondary); text-decoration: none; font-weight: 500; transition: all 0.3s ease; }
  .overview-card-standalone .contact-info a:hover { color: var(--primary); text-shadow: 0 0 10px rgba(0, 206, 201, 0.5); }
  .overview-card-standalone .contact-info i { color: var(--warning); margin-right: 8px; font-size: 16px; transition: all 0.3s ease; }
  .overview-card-standalone:hover .contact-info i { transform: scale(1.2); }
  .overview-card-standalone .contact-info span { display: flex; align-items: center; transition: all 0.3s ease; }
  .overview-card-standalone:hover .contact-info span { transform: translateX(5px); }
  .modal-bg { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.8); display: none; justify-content: center; align-items: center; z-index: 1000; animation: fadeInModalBg 0.3s ease; backdrop-filter: blur(5px); }
  @keyframes fadeInModalBg { from { opacity: 0; } to { opacity: 1; } }
  .modal { background: var(--modal-bg-dark); border-radius: 24px; padding: 30px; width: 95%; max-width: 400px; box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5); text-align: center; color: var(--light); animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); border: 1px solid rgba(255, 255, 255, 0.1); position: relative; overflow: hidden; transform: perspective(1000px) rotateX(0deg); transition: all 0.3s ease; }
  @keyframes slideUp { from { transform: translateY(20px) perspective(1000px) rotateX(10deg); opacity: 0; } to { transform: translateY(0) perspective(1000px) rotateX(0deg); opacity: 1; } }
  .modal:hover { transform: perspective(1000px) rotateX(5deg); box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7); }
  .modal::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 6px; background: var(--gradient-blue-purple); animation: borderFlow 3s linear infinite; background-size: 200% 100%; }
  @keyframes borderFlow { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
  .close-btn { position: absolute; top: 15px; right: 15px; background: rgba(255, 255, 255, 0.15); border: none; border-radius: 50%; width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; color: white; font-size: 18px; cursor: pointer; transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease; z-index: 100; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); animation: pulseCloseBtn 2s infinite; }
  @keyframes pulseCloseBtn { 0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.2); } 50% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); } }
  .close-btn:hover { background: rgba(255, 255, 255, 0.25); transform: scale(1.1); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); animation: none; }
  .close-btn:active { transform: scale(1); box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2); }
  #customAmountInput { width: 100%; padding: 16px 20px; margin: 20px 0; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 12px; font-size: 16px; outline: none; background: rgba(255, 255, 255, 0.1); color: white; text-align: center; transition: all 0.3s ease; }
  #customAmountInput::placeholder { color: rgba(255, 255, 255, 0.5); }
  #customAmountInput:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.3); }
  #customAmountInput::-webkit-outer-spin-button, #customAmountInput::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
  #customAmountInput[type=number] { -moz-appearance: textfield; }
  .confirm-btn { width: 100%; padding: 18px 20px; border-radius: 15px; font-size: 18px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-top: 25px; background: var(--gradient-blue-purple); box-shadow: 0 6px 20px rgba(106, 17, 203, 0.4); transform: perspective(500px) translateZ(0); position: relative; overflow: hidden; color: white; border: none; }
  .confirm-btn::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.1) 100%); transform: translateX(-100%); transition: transform 0.6s ease; }
  .confirm-btn:hover:not(:disabled) { background: linear-gradient(135deg, #2575fc 0%, #6a11cb 100%); transform: translateY(-3px) perspective(500px) translateZ(20px); box-shadow: 0 8px 25px rgba(106, 17, 203, 0.6); }
  .confirm-btn:hover:not(:disabled)::before { transform: translateX(100%); }
  .confirm-btn:disabled { background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.4); cursor: not-allowed; box-shadow: none; transform: none; opacity: 0.7; }
  .modal .confirm-hwid-btn { background: var(--primary); border-radius: 12px; padding: 16px 20px; font-size: 16px; font-weight: 600; color: #fff; margin-top: 25px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; transform: perspective(500px) translateZ(0); position: relative; overflow: hidden; border: none; }
  .modal .confirm-hwid-btn::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.1) 100%); transform: translateX(-100%); transition: transform 0.6s ease; }
  .modal .confirm-hwid-btn:hover { background: var(--primary-dark); transform: translateY(-2px) perspective(500px) translateZ(20px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3); }
  .modal .confirm-hwid-btn:hover::before { transform: translateX(100%); }
  .modal .confirm-hwid-btn:active { transform: translateY(0) perspective(500px) translateZ(10px); box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); }
  .transaction-item { background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 15px 20px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); transition: transform 0.2s ease, box-shadow 0.2s ease; cursor: pointer; transform: perspective(500px) translateZ(0); }
  .transaction-item:last-child { margin-bottom: 0; }
  .transaction-item:hover { transform: translateY(-3px) perspective(500px) translateZ(20px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3); }
  .transaction-item.status-pending_verification, .transaction-item.status-pending { background-color: var(--warning); box-shadow: 0 4px 15px rgba(253, 203, 110, 0.4); color: var(--dark); }
  .transaction-item.status-pending_verification:hover, .transaction-item.status-pending:hover { background-color: #ffb53a; transform: translateY(-3px) perspective(500px) translateZ(20px); box-shadow: 0 6px 20px rgba(253, 203, 110, 0.6); }
  .transaction-item.status-pending_verification .transaction-icon i, .transaction-item.status-pending_verification .transaction-amount, .transaction-item.status-pending_verification .transaction-status, .transaction-item.status-pending_verification .transaction-date, .transaction-item.status-pending_verification .transaction-right i, .transaction-item.status-pending .transaction-icon i, .transaction-item.status-pending .transaction-amount, .transaction-item.status-pending .transaction-status, .transaction-item.status-pending .transaction-date, .transaction-item.status-pending .transaction-right i { color: var(--dark); }
  .transaction-item.status-pending_verification .transaction-date, .transaction-item.status-pending .transaction-date { color: rgba(45, 52, 54, 0.7); }
  .transaction-item.status-completed { background-color: rgba(255, 255, 255, 0.05); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); }
  .transaction-item.status-completed:hover { background-color: rgba(255, 255, 255, 0.1); transform: translateY(-3px) perspective(500px) translateZ(20px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3); }
  .transaction-item.status-completed .transaction-icon i, .transaction-item.status-completed .transaction-amount, .transaction-item.status-completed .transaction-status, .transaction-item.status-completed .transaction-date, .transaction-item.status-completed .transaction-right i { color: var(--light); }
  .transaction-item.status-completed .transaction-date { color: rgba(255, 255, 255, 0.7); }
  .transaction-left { display: flex; align-items: center; gap: 15px; text-align: left; }
  .transaction-icon i { font-size: 28px; transition: all 0.3s ease; }
  .transaction-item:hover .transaction-icon i { transform: scale(1.2); }
  .transaction-info { display: flex; flex-direction: column; }
  .transaction-amount-status { display: flex; align-items: baseline; gap: 8px; margin-bottom: 3px; }
  .transaction-amount { font-size: 18px; font-weight: 600; transition: all 0.3s ease; }
  .transaction-item:hover .transaction-amount { text-shadow: 0 0 10px rgba(0, 0, 0, 0.2); }
  .transaction-status { font-size: 14px; font-weight: 400; text-transform: capitalize; transition: all 0.3s ease; }
  .transaction-item:hover .transaction-status { transform: translateX(5px); }
  .transaction-date { font-size: 12px; transition: all 0.3s ease; }
  .transaction-item:hover .transaction-date { transform: translateX(5px); }
  .transaction-right i { font-size: 16px; opacity: 0.5; pointer-events: none; transition: all 0.3s ease; }
  .transaction-item:hover .transaction-right i { opacity: 1; transform: translateX(5px); }
  .empty-history { text-align: center; padding: 40px 20px; color: rgba(255, 255, 255, 0.6); }
  .empty-history i { font-size: 60px !important; margin-bottom: 20px !important; opacity: 0.7 !important; color: rgba(255, 255, 255, 0.4); animation: spin 2s linear infinite; }
  @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  .empty-history p { font-size: 16px; transition: all 0.3s ease; }
  .empty-history:hover p { color: rgba(255, 255, 255, 0.8); transform: scale(1.05); }
  .bonus-message { color: var(--secondary); font-size: 14px; margin: 15px 0; display: flex; align-items: center; justify-content: center; gap: 8px; animation: textGlowBonusMessage 3s infinite alternate; }
  @keyframes textGlowBonusMessage { 0% { opacity: 0.7; } 100% { opacity: 1; } }
  .bonus-message i { font-size: 16px; animation: bounce 2s infinite ease-in-out; }
  @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
  .tools-list { display: flex; flex-direction: column; gap: 10px; }
  .tools-list button { width: 100%; padding: 14px 20px; border: none; border-radius: 12px; background: rgba(255, 255, 255, 0.1); color: var(--light); font-size: 16px; font-weight: 500; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); transform: perspective(500px) translateZ(0); }
  .tools-list button:hover { background: rgba(255, 255, 255, 0.15); transform: translateY(-3px) perspective(500px) translateZ(20px); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); }
  .tools-list button i { font-size: 18px; color: var(--secondary); transition: all 0.3s ease; }
  .tools-list button:hover i { transform: scale(1.2); }
  .modal p { margin: 15px 0; font-size: 15px; transition: all 0.3s ease; }
  .modal:hover p { transform: translateX(5px); }
  .modal .message-top { margin-top: 0; margin-bottom: 20px; }
  .package-item { background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 15px 20px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); transition: transform 0.2s ease, box-shadow 0.2s ease; cursor: pointer; border: 1px solid rgba(255, 255, 255, 0.1); transform: perspective(500px) translateZ(0); }
  .package-item:last-child { margin-bottom: 0; }
  .package-item:hover { transform: translateY(-5px) perspective(500px) translateZ(20px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3); background: rgba(255, 255, 255, 0.1); }
  .package-item .package-info { text-align: left; }
  .package-item .package-title { font-size: 18px; font-weight: 600; color: var(--light); margin-bottom: 5px; transition: all 0.3s ease; }
  .package-item:hover .package-title { color: var(--secondary); }
  .package-item .package-duration { font-size: 14px; color: rgba(255, 255, 255, 0.7); transition: all 0.3s ease; }
  .package-item:hover .package-duration { color: rgba(255, 255, 255, 0.9); }
  .package-item .package-price { font-size: 20px; font-weight: 700; color: var(--warning); transition: all 0.3s ease; }
  .package-item:hover .package-price { transform: scale(1.1); text-shadow: 0 0 10px rgba(253, 203, 110, 0.5); }
  #purchaseSuccessModal #generatedRedeemCode { background: rgba(255,255,255,0.05); border-radius: 8px; padding: 10px 15px; font-family: monospace; letter-spacing: 1px; margin-top: 10px; transition: all 0.3s ease; animation: codeGlow 2s infinite alternate; }
  @keyframes codeGlow { 0% { box-shadow: 0 0 5px rgba(0, 206, 201, 0.3); } 100% { box-shadow: 0 0 15px rgba(0, 206, 201, 0.7); } }
  #purchaseSuccessModal button.confirm-btn { margin-top: 15px; } 
  .bonus-system-container { display: flex; gap: 20px; width: calc(100% - 40px); margin-left: 20px; margin-right: 20px; margin-top: 30px; margin-bottom: 30px; padding: 20px; background: rgba(0, 0, 0, 0.2); border-radius: 15px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5); flex-wrap: wrap; }
  .bonus-add-balance-section { flex: 1.5; background: var(--dark); padding: 20px; border-radius: 10px; color: var(--light); min-width: 300px; }
  .bonus-accumulated-section { flex: 1; background: var(--dark); padding: 20px; border-radius: 10px; text-align: center; color: var(--light); display: flex; flex-direction: column; align-items: center; justify-content: center; min-width: 280px; }
  .bonus-add-balance-section h2, .bonus-accumulated-section h2 { font-size: 20px; margin-bottom: 20px; font-weight: 500; color: #dfe6e9; text-align: center; }
  .bonus-progress-bar { display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 8px; align-items: flex-start; position: relative; margin-bottom: 25px; padding: 10px 0; }
  .bonus-progress-bar::before { content: ''; position: absolute; top: calc(10px + 30px / 2 - 3px / 2); left: 5%; right: 5%; height: 3px; background-color: #636e72; z-index: 1; }
  .milestone-item { display: flex; flex-direction: column; align-items: center; text-align: center; position: relative; z-index: 2; background: var(--dark); width: 100%; }
  .milestone-marker { max-width: 100px; min-width: 60px; width: 100%; box-sizing: border-box; height: 30px; border-radius: 15px; background-color: #495357; color: #b2bec3; display: flex; justify-content: center; align-items: center; font-size: 13px; font-weight: 500; margin-bottom: 8px; border: 2px solid #636e72; transition: all 0.3s ease; padding-left: 5px; padding-right: 5px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .milestone-marker i { margin-right: 5px; font-size: 12px; }
  .milestone-item.unlocked .milestone-marker { background-color: #e17055; color: white; border-color: #d63031; }
  .milestone-bonus-text { font-size: 12px; color: #b2bec3; word-break: keep-all; }
  .milestone-item.unlocked .milestone-bonus-text { color: #e17055; font-weight: 500; }
  .bonus-summary { display: flex; justify-content: space-around; margin-top: 20px; background-color: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; flex-wrap: wrap; }
  .summary-item { display: flex; flex-direction: column; align-items: center; padding: 5px 10px; text-align: center; }
  .summary-item span { font-size: 13px; color: #b2bec3; margin-bottom: 5px; }
  .summary-item strong { font-size: 16px; font-weight: 600; color: white; }
  .summary-item.recent-bonus-item strong { background-color: #e17055; color: white; padding: 5px 15px; border-radius: 20px; font-size: 14px; }
  .bonus-chest-img { font-size: 70px; color: #f1c40f; text-shadow: 0 0 10px rgba(241, 196, 15, 0.7); animation: glowCoin 2s infinite alternate ease-in-out; margin-bottom: 15px; }
  @keyframes glowCoin { 0% { text-shadow: 0 0 5px rgba(241, 196, 15, 0.3); } 100% { text-shadow: 0 0 15px rgba(241, 196, 15, 1); } }
  .bonus-accumulated-section p { font-size: 13px; color: #b2bec3; margin-bottom: 20px; line-height: 1.5; max-width: 90%; }
  .accumulated-bonus-value-wrapper { display: flex; align-items: center; justify-content: center; background-color: rgba(0,0,0,0.3); padding: 10px 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #636e72; min-width: 150px; }
  .accumulated-bonus-value-wrapper i { color: #fdcb6e; font-size: 20px; margin-right: 10px; }
  #accumulatedBonusDisplay { font-size: 22px; font-weight: 700; color: white; }
  .claim-bonus-btn { background: linear-gradient(135deg, #e17055 0%, #d63031 100%); color: white; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; width: 100%; max-width: 250px; }
  .claim-bonus-btn:hover { background: linear-gradient(135deg, #d63031 0%, #e17055 100%); box-shadow: 0 5px 15px rgba(225, 112, 85, 0.4); }
  .claim-bonus-btn:disabled { background: #636e72; cursor: not-allowed; opacity: 0.7; }
  #paymentGatewayInstructions p { margin-bottom: 8px; }
  #paymentGatewayInstructions hr { border-color: rgba(255,255,255,0.2); margin: 10px 0; }
  #paymentGatewayInstructions strong { color: var(--warning); }
  @media (max-width: 992px) { .bonus-system-container { flex-direction: column; } .bonus-add-balance-section, .bonus-accumulated-section { flex: none; width: 100%; } .bonus-progress-bar { gap: 10px; } .bonus-progress-bar::before { display: none; } .milestone-item { margin-bottom: 20px; } .bonus-summary { flex-direction: column; gap: 12px; align-items: center; } .bonus-summary .summary-item { width: auto; min-width: 180px; max-width: 85%; background-color: rgba(255,255,255,0.05); padding: 10px 15px; border-radius: 8px; } }
  @media (max-width: 768px) { #dashboardPanel { flex-direction: column; align-items: center; padding: 20px; max-width: 100%; min-height: unset; border-radius: 0; } .main-dashboard-content { max-height: calc(100vh - 80px); padding-top: 60px; } .sidebar { width: 100%; height: 100%; border-radius: 0; border-right: none; padding-top: 20px; } .close-sidebar-btn { top: 15px; right: 15px; } .main-dashboard-content { width: 100%; padding: 0; padding-top: 70px; } .menu-toggle-btn { top: 15px; left: 15px; } .notification-wrapper-main { top: 15px; right: 15px; } .notification-wrapper-main .notification-btn { width: 30px; height: 30px; } .notification-wrapper-main .notification-btn i { font-size: 16px; } .notification-wrapper-main .notification-btn span { top: -2px; right: -2px; min-width: 16px; height: 16px; font-size: 9px; } .dashboard-header { flex-direction: column; align-items: center; margin-bottom: 10px; padding: 0 15px;} .profile-img { width: 60px; height: 60px; margin-right: 0; margin-bottom: 10px; } .killerx-title { font-size: 24px; margin-left: 0; text-align: center; } .killerx-title span { font-size: 16px; } .dashboard-link, .user-id-display, .hardware-id-section, .redeem-section-wrapper, .overview-card-standalone, .bonus-system-container { width: calc(100% - 30px); margin-left: 15px; margin-right: 15px; } .balance-container { margin-top: 20px; } .points { font-size: 48px; } .liquid-blob { filter: blur(60px); } #loginBg .liquid-blob:nth-child(1), #dashboardBg .liquid-blob:nth-child(1) { width: 600px; height: 600px; } #loginBg .liquid-blob:nth-child(2), #dashboardBg .liquid-blob:nth-child(2) { width: 500px; height: 500px; } #loginBg .liquid-blob:nth-child(3), #dashboardBg .liquid-blob:nth-child(3) { width: 550px; height: 550px; } #customAmountInput { padding: 14px 15px; font-size: 15px; } .transaction-item { padding: 12px 15px; } .transaction-left { gap: 10px; } .transaction-icon i { font-size: 24px; } .transaction-amount { font-size: 16px; } .transaction-status { font-size: 12px; } .transaction-date { font-size: 10px; } #storeModal .modal { max-width: 95%; width: auto; padding: 20px; } #packageDetailModal .modal, #renewConfirmationModal .modal, #purchaseSuccessModal .modal { max-width: 350px; padding: 25px; } .buy-button { padding: 12px 20px !important; font-size: 16px !important; } }
  @media (max-width: 480px) { .bonus-add-balance-section h2, .bonus-accumulated-section h2 { font-size: 18px; margin-bottom: 15px; } .bonus-progress-bar { grid-template-columns: repeat(auto-fit, minmax(70px, 1fr)); gap: 8px; } .milestone-item { margin-bottom: 15px; } .milestone-marker { font-size: 12px; min-width: 50px; height: 28px; } .milestone-bonus-text { font-size: 11px; } .bonus-summary .summary-item { min-width: 0; width: 90%; padding: 8px 12px; } .bonus-summary .summary-item span { font-size: 12px; } .bonus-summary .summary-item strong { font-size: 15px; } .bonus-summary .summary-item.recent-bonus-item strong { font-size: 13px; padding: 4px 12px; } .bonus-accumulated-section p { font-size: 12px; } .accumulated-bonus-value-wrapper i { font-size: 18px; } #accumulatedBonusDisplay { font-size: 20px; } .claim-bonus-btn { font-size: 15px; padding: 10px 25px; } .redeem-section-wrapper { max-width: calc(100% - 30px) !important; padding: 15px !important;} .redeem-input-container { flex-direction: column; padding-left: 0 !important; border-color: transparent !important; background-color: transparent !important; } .redeem-input-container i.fa-gift { display: none; } #redeemCodeInput { width: 100%; text-align: center; margin-bottom: 10px; background-color: var(--auth-input-bg) !important; border: 1px solid var(--auth-accent) !important; border-radius: 6px !important; padding: 12px 10px !important; } #redeemCodeInput::placeholder { text-align: center; } .redeem-input-container button { width: 100%; border-radius: 6px !important; } }

</style>
</head>
<body>
<!-- Backgrounds -->
<div class="liquid-bg active" id="loginBg"> <div class="liquid-blob"></div> <div class="liquid-blob"></div> <div class="liquid-blob"></div> </div>
<div class="liquid-bg" id="dashboardBg"> <div class="liquid-blob"></div> <div class="liquid-blob"></div> <div class="liquid-blob"></div> </div>
<!-- Simplified Auth Container (Login Only) -->
<div id="authContainer">
<div class="auth-box">
<div class="auth-left-panel">
<img alt="KillerX Logo" class="auth-logo" src="https://firebasestorage.googleapis.com/v0/b/ng-mods-x2.appspot.com/o/Untitled_design_4.png?alt=media&amp;token=c804a64c-a2ca-47ef-9f49-98d9a98d20d1"/>
<h2>Best Gaming Experience</h2>
<ul> <li><i class="fas fa-chevron-right"></i> Free and Fast Updates</li> <li><i class="fas fa-chevron-right"></i> Ensuring the Fluidity</li> <li><i class="fas fa-chevron-right"></i> Precision Needed to Master</li> <li><i class="fas fa-chevron-right"></i> Exceptional Performance</li> </ul>
</div>
<div class="auth-right-panel">
<div class="auth-form" id="newLoginForm" style="display: flex; flex-direction: column; align-items: center;">
<h1 style="text-align:center;color:white;margin-bottom:20px;">Sign in with Google</h1>
<button class="auth-button" onclick="signInWithGoogle()" style="display:flex;align-items:center;justify-content:center;">
<i class="fab fa-google" style="margin-right: 8px;"></i> Sign in with Google
        </button>
<div class="auth-error-message" id="authError"></div>
</div>
<!-- Removed manual User ID input and login button -->
<h1>User Log In</h1>
<label for="authUserId">USER ID</label>
<div class="input-group"><input id="authUserId" placeholder="Enter your User ID" type="text"/></div>
<!-- Password field removed -->
<div class="auth-error-message" id="authError"></div>
<button class="auth-button" id="newLoginButton">Log In</button>
<!-- Registration links removed -->
</div>
<!-- Registration form div (#newRegisterForm) removed entirely -->
</div>
</div>

<!-- Dashboard Panel (Structure remains the same as your V6) -->
<div class="content-panel" id="dashboardPanel" style="display: none;">
<!-- ... Your existing dashboard HTML structure from V6 goes here ... -->
<!-- This includes .menu-toggle-btn, .notification-wrapper-main, .sidebar, .sidebar-overlay, .main-dashboard-content etc. -->
<button class="menu-toggle-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
<div class="notification-wrapper-main" style="top: 70px;"> <button class="notification-btn" onclick="openStore()"><i class="fas fa-store"></i></button> </div>
<div class="notification-wrapper-main"> <button class="notification-btn" onclick="showNotifications()"><i class="fas fa-bell"></i> <span id="notifCount">0</span></button> </div>
<div class="sidebar" id="sidebar"> <button class="close-sidebar-btn" onclick="toggleSidebar()">×</button> <h2 class="sidebar-title">Side Menu</h2> <button class="premium-dashboard-button add-money" onclick="openModal(); toggleSidebar()"><i class="fas fa-plus"></i> Add Money</button> <button class="premium-dashboard-button hwid-reset-btn" onclick="openHWIDPopup(); toggleSidebar()"><i class="fas fa-sync-alt"></i> Reset HW ID</button> <button class="premium-dashboard-button download-tools-btn" onclick="openToolsModal(); toggleSidebar()"><i class="fas fa-download"></i> Download Tools</button> <button class="premium-dashboard-button history-btn" onclick="showHistory(); toggleSidebar()"><i class="fas fa-clock"></i> TRANSACTION HISTORY</button> <button class="premium-dashboard-button logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button> </div>
<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
<div class="main-dashboard-content">
<div class="dashboard-header"> <img alt="Profile" class="profile-img" src="https://firebasestorage.googleapis.com/v0/b/ng-mods-x2.appspot.com/o/Untitled_design_4.png?alt=media&amp;token=c804a64c-a2ca-47ef-9f49-98d9a98d20d1"> <div class="killerx-title">KILLER X PANEL<span>OFFICAL</span></div> </img></div>
<div class="dashboard-link"><i class="fas fa-home"></i> Dashboard</div>
<div class="user-id-display">User ID : <span id="dashboardUserId"></span></div>
<div class="hardware-id-section"> <div class="hardware-id-label">Hardware ID</div> <div class="hardware-id-value" id="machineId"></div> </div>
<div class="balance-container"> <div class="points" id="points">0</div> <div class="balance-label">Balance</div> <div class="status-text" id="statusText">Active</div> <div class="expires-text" id="expiresText">Expires: Loading...</div> </div>
<div class="redeem-section-wrapper"> <h3>Redeem Key</h3> <p>Activate your purchased key by informing below</p> <div class="redeem-input-container"> <i class="fas fa-gift"></i> <input id="redeemCodeInput" placeholder="XXXXXX-XXXXXX-XXXXXX" type="text"> <button onclick="redeemCode()">REDEEM KEY</button> </input></div> </div>
<div class="bonus-system-container"> <div class="bonus-add-balance-section"> <h2>টাকা যোগ করুন এবং বোনাস পান</h2> <div class="bonus-progress-bar"></div> <div class="bonus-summary"> <div class="summary-item"><span>মোট যোগ হয়েছে</span><strong id="totalAddedForBonusDisplay">৳0</strong></div> <div class="summary-item"><span>পরবর্তী ধাপ</span><strong id="nextBonusMetaDisplay">৳0</strong></div> <div class="summary-item recent-bonus-item"><span>সাম্প্রতিক বোনাস</span><strong id="recentBonusDisplay">৳0</strong></div> </div> </div> <div class="bonus-accumulated-section"> <i class="fas fa-coins bonus-chest-img"></i> <h2>আপনার জমাকৃত বোনাস</h2> <div class="accumulated-bonus-value-wrapper"><i class="fas fa-coins"></i><span id="accumulatedBonusDisplay">৳0.00</span></div> <button class="claim-bonus-btn" onclick="claimBonus()">বোনাস সংগ্রহ করুন</button> </div> </div>
<div class="overview-card-standalone"> <div class="card-title">KX Overview</div> <div class="card-text">KILLER X OFFICIAL WEBSITE</div> <div class="card-text">USER DASHBOARD </div> <div class="contact-info"> <span><i class="fas fa-user-tie"></i>OWNER ➤ SHEZIN BOY</span> <span><i class="fab fa-whatsapp"></i>CONTACT 📞 <a href="https://wa.me/8801889221262" target="_blank">WhatsApp 01889221262</a></span> </div> </div>
</div>
</div>
<!-- All Modals (Structure remains the same as your V6) -->
<!-- ... Your existing modal HTML structures from V6 go here ... -->
<div class="modal-bg" id="modalBg"> <div aria-labelledby="modalTitle" aria-modal="true" class="modal" role="dialog"> <button aria-label="Close modal" class="close-btn" onclick="closeModal()">×</button> <h2 id="modalTitle"><i class="fas fa-wallet"></i> Enter Amount</h2> <input id="customAmountInput" min="50" placeholder="Enter Amount (Min ৳50)" step="10" type="number"/> <div class="bonus-message" id="addMoneyBonusMessage"><i class="fas fa-info-circle"></i> ১০০ টাকার বেশি অ্যাড করলেই বোনাস পাবেন 🥰!</div> <button class="confirm-btn" disabled="" id="confirmAddMoneyBtn" onclick="confirmAdd()"><i class="fas fa-check-circle"></i> Confirm &amp; Pay</button> </div> </div>
<div class="modal-bg" id="paymentOptionsModal" style="display: none;"> <div aria-modal="true" class="modal" role="dialog" style="max-width: 450px;"> <button aria-label="Close modal" class="close-btn" onclick="closePaymentOptionsModal()">×</button> <h2><i class="fas fa-credit-card"></i> Select Payment Method</h2> <div style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;"> <button class="premium-dashboard-button" onclick="showPaymentGateway('bkash')"> <img alt="Bkash" src="https://i.ibb.co/MDBmC2D/bkash-logo-from-crop.png" style="width: 24px; height: 24px; margin-right: 10px; vertical-align: middle;"/> Bkash </button> <button class="premium-dashboard-button" onclick="showPaymentGateway('nagad')"> <img alt="Nagad" src="https://i.ibb.co/QmMScQd/nagad-logo-from-crop.png" style="width: 24px; height: 24px; margin-right: 10px; vertical-align: middle;"/> Nagad </button> <button class="premium-dashboard-button" onclick="showPaymentGateway('rocket')"> <img alt="Rocket" src="https://i.ibb.co/bQx5QfD/rocket-logo-from-crop.png" style="width: 24px; height: 24px; margin-right: 10px; vertical-align: middle;"/> Rocket </button> </div> </div> </div>
<div class="modal-bg" id="paymentGatewayModal" style="display: none;"> <div aria-modal="true" class="modal" role="dialog" style="max-width: 500px;"> <button aria-label="Close modal" class="close-btn" onclick="closePaymentGatewayModal()">×</button> <h2 id="paymentGatewayTitle" style="display: flex; align-items: center; justify-content: center;"><i class="fas fa-money-check-alt" style="margin-right:10px;"></i> Payment</h2> <div id="paymentGatewayInstructions" style="text-align: left; margin: 20px 0; background: rgba(255,255,255,0.03); padding: 15px; border-radius: 10px; font-size: 13px; line-height: 1.7; border: 1px solid rgba(255,255,255,0.1);"> </div> <input id="paymentTransactionIdInput" placeholder="Enter Transaction ID" style="width: 100%; padding: 16px 20px; margin-bottom: 20px; border: none; border-radius: 12px; font-size: 16px; outline: none; background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid rgba(255, 255, 255, 0.1);" type="text"/> <button class="confirm-btn" id="submitPaymentTxnBtn" onclick="submitPaymentTransactionId()"><i class="fas fa-paper-plane"></i> Submit Transaction ID</button> </div> </div>
<div class="modal-bg" id="genericSuccessModal" style="display: none;"> <div class="modal"> <button class="close-btn" onclick="closeGenericSuccessModal()">×</button> <h2 style="color: var(--success);"><i class="fas fa-check-circle"></i> Success!</h2> <p id="genericSuccessMessage" style="margin: 20px 0; font-size: 16px;"></p> <button class="confirm-btn" onclick="closeGenericSuccessModal()" style="background: var(--success);">OK</button> </div> </div>
<div class="modal-bg" id="genericErrorModal" style="display: none;"> <div class="modal"> <button class="close-btn" onclick="closeGenericErrorModal()">×</button> <h2 style="color: var(--danger);"><i class="fas fa-exclamation-triangle"></i> Error!</h2> <p id="genericErrorMessage" style="margin: 20px 0; font-size: 16px;"></p> <button class="confirm-btn" onclick="closeGenericErrorModal()" style="background: var(--danger);">OK</button> </div> </div>
<div class="modal-bg" id="historyModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="closeHistoryModal()">×</button><h2><i class="fas fa-history"></i> Transaction History</h2><div id="historyList" style="max-height: 400px; overflow-y: auto; margin: 20px 0;"><div class="empty-history"><i class="fas fa-spinner fa-spin"></i><p>Loading transactions...</p></div></div></div></div>
<div class="modal-bg" id="notificationModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="closeNotificationModal()">×</button><h2><i class="fas fa-bell"></i> Notifications</h2><button onclick="markAllNotificationsRead()" style="margin-bottom: 20px; background: rgba(255,255,255,0.1); color: white; border: none; font-size: 14px; padding: 10px 20px; border-radius: 20px; cursor: pointer;"><i class="fas fa-check-double"></i> Mark All as Read</button><div id="notificationList" style="max-height: 400px; overflow-y: auto;"></div></div></div>
<div class="modal-bg" id="hwidResetModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="document.getElementById('hwidResetModal').style.display='none'">×</button><h2><i class="fas fa-sync-alt"></i> HW ID Reset</h2><p class="hwid-message" style="margin: 20px 0; font-size: 15px;"></p><button class="confirm-hwid-btn" onclick="confirmHWIDReset()"><i class="fas fa-check-circle"></i> RESET</button></div></div>
<div class="modal-bg" id="hwidSuccessModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="document.getElementById('hwidSuccessModal').style.display='none'">×</button><h2><i class="fas fa-check-circle"></i> Success</h2><p style="margin: 20px 0; font-size: 15px;">আপনার HW ID রিসেট সফল হয়েছে।</p></div></div>
<div class="modal-bg" id="hwidErrorModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="document.getElementById('hwidErrorModal').style.display='none'">×</button><p class="message-top" id="hwidErrorTextContent">আপনার ব্যালেন্সে পর্যাপ্ত কয়েন নেই। আগে ব্যালেন্স যোগ করুন।</p><h2><i class="fas fa-exclamation-triangle"></i> Balance Low</h2></div></div>
<div class="modal-bg" id="redeemSuccessModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="document.getElementById('redeemSuccessModal').style.display='none'">×</button><h2><i class="fas fa-check-circle"></i> Redeem Successful</h2><p id="redeemRewardText" style="margin: 20px 0; font-size: 15px;">আপনি সফলভাবে রিডিম করেছেন।</p></div></div>
<div class="modal-bg" id="redeemErrorModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="document.getElementById('redeemErrorModal').style.display='none'">×</button><p class="message-top" id="redeemErrorText"></p><h2><i class="fas fa-exclamation-triangle"></i> Redeem Failed</h2></div></div>
<div class="modal-bg" id="storeModal" style="display: none;"><div class="modal" style="max-width: 95%; width: 800px;"><button class="close-btn" onclick="closeStoreModal()">×</button><h2><i class="fas fa-store"></i> KillerX Package Renew</h2><div id="packageRenewSection" style="display:block; margin-top: 20px;"><div id="packageRenewList" style="max-height: 400px; overflow-y: auto;"><div class="empty-history"><i class="fas fa-spinner fa-spin"></i><p>Loading packages...</p></div></div></div></div></div>
<div class="modal-bg" id="packageDetailModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="closePackageDetailModal()">×</button><div class="modal-content-wrapper" style="display: flex; flex-direction: column; align-items: center;"><h3 class="product-title" id="detailPackageTitle"></h3><p class="product-price" id="detailPackagePrice"></p><p class="product-description" id="detailPackageDescription"></p><button class="buy-button confirm-btn" id="buyPackageButton"><i class="fas fa-shopping-cart"></i> Buy Now</button></div></div></div>
<div class="modal-bg" id="renewConfirmationModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="closeRenewConfirmationModal()">×</button><h2>Confirm Package Purchase</h2><p class="confirm-message" id="confirmRenewMessage"></p><div class="confirmation-buttons" style="display:flex; justify-content:space-around; margin-top:20px;"><button class="confirm-btn confirm-buy-btn" id="confirmRenewFinalButton" style="background:var(--success); width:45%;">Confirm</button><button class="confirm-btn cancel-buy-btn" onclick="closeRenewConfirmationModal()" style="background:var(--danger); width:45%;">Cancel</button></div></div></div>
<div class="modal-bg" id="purchaseSuccessModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="closePurchaseSuccessModal()">×</button><h2><i class="fas fa-check-circle"></i> Purchase Successful!</h2><p class="message-top">আপনার কেনাকাটা সফল হয়েছে। আপনার রিডিম কোড নিচে দেওয়া হলো:</p><div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 12px; margin: 20px 0; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;"><span id="generatedRedeemCode" style="font-size: 18px; font-weight: bold; color: var(--secondary); word-break: break-all; flex-grow: 1; text-align: left;"></span><button onclick="copyRedeemCode()" style="background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 14px; margin-left: 10px; margin-top: 5px;"><i class="fas fa-copy"></i> Copy</button></div><p style="font-size: 14px; text-align: center; color: rgba(255, 255, 255, 0.7);">এই কোডটি কপি করে ড্যাশবোর্ডের রিডিম বক্সে প্রবেশ করে আপনার মেয়াদ বৃদ্ধি করুন।</p><button class="confirm-btn" onclick="closePurchaseSuccessModal()">Done</button></div></div>
<div class="modal-bg" id="toolsModal" style="display: none;"><div class="modal"><button class="close-btn" onclick="closeToolsModal()">×</button><h2><i class="fas fa-tools"></i> Download Tools</h2><div class="tools-list" id="toolsList" style="margin: 20px 0;"><p style="text-align:center;">Loading tools...</p></div></div></div>
<script>
  // Firebase config and init
  const firebaseConfig = { apiKey: "AIzaSyAueM2O16GbLJX4TmfK7g8IZyFJRMdh1WE", databaseURL: "https://ng-mods-x2-default-rtdb.firebaseio.com", projectId: "ng-mods-x2", storageBucket: "ng-mods-x2.appspot.com" };
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  // Global variables
  let currentUser = null; // Will store the User ID (database key)
  let transactionListener = null;
  let countdownIntervalId = null; 
  let selectedPackageForPurchase = null; 
  let currentPaymentMethod = null; 
  let selectedAmount = null; 
  const MIN_ADD_AMOUNT = 50; 

  // DOM Elements for Auth
  const authContainer = document.getElementById('authContainer');
  const dashboardPanel = document.getElementById('dashboardPanel');
  const loginBg = document.getElementById('loginBg');
  const dashboardBg = document.getElementById('dashboardBg');
  
  const newLoginForm = document.getElementById('newLoginForm');
  const authUserIdInput = document.getElementById('authUserId');
  // Password input and toggle for login are removed
  const authErrorDiv = document.getElementById('authError');
  const newLoginButton = document.getElementById('newLoginButton');
  // Registration related links and form elements are removed from JS as well

  function showAuthUI() {
      authContainer.classList.add('visible');
      dashboardPanel.style.display = 'none';
      loginBg.classList.add('active');
      dashboardBg.classList.remove('active');
      document.body.style.overflow = 'hidden'; 
      
      newLoginForm.style.display = 'block'; // Only login form exists
      // No registration form to hide
      
      if(authUserIdInput) authUserIdInput.value = '';
      if(authErrorDiv) authErrorDiv.textContent = '';
      if(newLoginButton) newLoginButton.disabled = false; // Ensure login button is enabled
  }

  function showDashboardUI(username, userData) {
      if (userData.isBlocked === true) {
          const popup = document.createElement('div');
          popup.innerHTML = `<div style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(255,255,255,0.1);backdrop-filter:blur(12px);color:white;padding:30px;border-radius:20px;text-align:center;box-shadow:0 8px 30px rgba(0,0,0,0.5);animation:fadeScale .4s ease;z-index:9999"><h3 style="margin-bottom:16px;font-size:20px">Your Account is Banned</h3><p style="margin-bottom:20px">আপনার একাউন্টটি ব্যান করা হয়েছে। দয়া করে অ্যাডমিনের সাথে যোগাযোগ করুন।</p><a href="https://wa.me/8801889221262" target="_blank" style="display:inline-block;background-color:#25D366;color:white;padding:10px 20px;border-radius:30px;text-decoration:none;font-weight:500;box-shadow:0 4px 12px rgba(0,0,0,0.3)">Admin Help (WhatsApp)</a></div><style>@keyframes fadeScale{from{opacity:0;transform:translate(-50%,-50%) scale(.95)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}</style>`;
          document.body.appendChild(popup);
          return;
      }
      document.getElementById('dashboardUserId').textContent = username.toUpperCase();
      document.getElementById('machineId').textContent = userData.machineId || 'N/A';
      document.getElementById('statusText').textContent = userData.status || 'Active';
      updateCountdown(userData.expiryDate); 
      firebase.database().ref('notifications/' + username).once('value').then(s => { document.getElementById('notifCount').textContent = Object.keys(s.val() || {}).length; }).catch(() => { document.getElementById('notifCount').textContent = 0; });
      animatePoints(0, userData.balance || 0, 1500);
      initializeBonusSystemUI(); 
      displayBonusSystem(userData); 
      
      database.ref('users/' + username).on('value', snapshot => {
          const liveUserData = snapshot.val();
          if (liveUserData && document.getElementById('points')) { // Check if user data and element exist
            document.getElementById('points').textContent = liveUserData.balance || 0;
            document.getElementById('machineId').textContent = liveUserData.machineId || 'N/A';
            document.getElementById('statusText').textContent = liveUserData.status || 'Active';
            updateCountdown(liveUserData.expiryDate); 
            document.getElementById('dashboardUserId').textContent = username.toUpperCase();
            displayBonusSystem(liveUserData);
          } else if (!liveUserData && currentUser === username) { // If user data becomes null while logged in
              logout(); // Log out the user as their data is gone
              showGenericError("Session Error", "Your account data could not be found. Please log in again or contact support.");
          }
      });
      
      authContainer.classList.remove('visible');
      dashboardPanel.style.display = 'flex'; 
      loginBg.classList.remove('active');
      dashboardBg.classList.add('active');
      document.body.style.overflow = 'auto'; 
  }

  // Registration function (registerUser) is REMOVED

  async function login() {
    const userId = authUserIdInput.value.trim().toLowerCase(); 

    if (!userId) { 
        authErrorDiv.textContent = 'Please enter your User ID.'; 
        return; 
    }
    // Password input and checks are removed

    authErrorDiv.textContent = 'Logging in...';
    newLoginButton.disabled = true;

    try {
        const userRef = database.ref('users/' + userId);
        const snapshot = await userRef.once('value');

        if (snapshot.exists()) {
            const userData = snapshot.val();
            // No password comparison needed
            currentUser = userId; 
            localStorage.setItem('currentUser', userId); 
            showDashboardUI(userId, userData); 
            authErrorDiv.textContent = ''; 
        } else { 
            authErrorDiv.textContent = 'User ID not found. Please check your User ID.'; 
        }
    } catch (error) {
        authErrorDiv.textContent = 'Login failed. An error occurred.'; 
        console.error('Login error:', error); 
    } finally {
        if (newLoginButton) newLoginButton.disabled = false;
    }
  }
  
  if(newLoginButton) newLoginButton.addEventListener('click', login);
  // Event listeners for registration are removed

  function logout() { 
    if (currentUser) { 
        database.ref('users/' + currentUser).off('value'); 
        if (transactionListener) { 
            database.ref('transactions/' + currentUser).off('value', transactionListener); 
            transactionListener = null; 
        } 
        if (countdownIntervalId) { 
            clearInterval(countdownIntervalId); 
            countdownIntervalId = null; 
        } 
        currentUser = null; 
        localStorage.removeItem('currentUser'); 
    } 
    showAuthUI(); // Show the simplified login UI
  }

  document.addEventListener('DOMContentLoaded',()=>{ 
    const storedUserId = localStorage.getItem('currentUser'); 
    if(storedUserId){ 
        database.ref('users/' + storedUserId).once('value') 
        .then(s=>{ 
            if(s.exists()){ 
                currentUser = storedUserId; 
                showDashboardUI(storedUserId, s.val()); 
            }else{ 
                localStorage.removeItem('currentUser'); 
                showAuthUI(); 
            } 
        }) 
        .catch(e=>{ 
            console.error("Auto-login DB fetch failed:",e); 
            localStorage.removeItem('currentUser'); 
            showAuthUI(); 
        }); 
    } else { 
        showAuthUI(); 
    } 
  });

  // --- All other JavaScript functions (animatePoints, updateCountdown, modals, bonus system, etc.) ---
  // --- should remain the same as in your V6 + my previous full code update,         ---
  // --- as they operate on `currentUser` and interact with the database.           ---
  // --- For brevity, I am not repeating them all here. Ensure they are included.   ---
  function animatePoints(start, end, duration) { const el = document.getElementById('points'); let ts = null; const step = t => { if (!ts) ts = t; const p = Math.min((t - ts) / duration, 1); el.textContent = Math.floor(p * (end - start) + start); if (p < 1) window.requestAnimationFrame(step); }; window.requestAnimationFrame(step); }
  function updateCountdown(expiryDateStr) { const el = document.getElementById('expiresText'); if (countdownIntervalId) { clearInterval(countdownIntervalId); countdownIntervalId = null; } if (!expiryDateStr) { el.textContent = 'Expires: N/A'; el.style.color = 'rgba(255,255,255,0.6)'; return; } const expiryDate = new Date(expiryDateStr).getTime(); countdownIntervalId = setInterval(() => { const now = new Date().getTime(); let d = expiryDate - now; if (d < 0) { el.textContent = 'Expired!'; el.style.color = 'var(--danger)'; clearInterval(countdownIntervalId); countdownIntervalId = null; return; } const dys = Math.floor(d/(1000*60*60*24)); d%=(1000*60*60*24); const hrs = Math.floor(d/(1000*60*60)); d%=(1000*60*60); const mins = Math.floor(d/(1000*60)); d%=(1000*60); const secs = Math.floor(d/1000); el.textContent = `Expires in: ${dys}d ${hrs.toString().padStart(2,'0')}h ${mins.toString().padStart(2,'0')}m ${secs.toString().padStart(2,'0')}s`; el.style.color = 'var(--secondary)'; }, 1000); }
  function toggleSidebar() { const sb = document.getElementById('sidebar'), ov = document.getElementById('sidebarOverlay'); sb.classList.toggle('active'); ov.classList.toggle('active'); document.body.style.overflow = sb.classList.contains('active') ? 'hidden' : (dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden'); }
  const modalBg = document.getElementById('modalBg'); const addMoneyBonusMessageEl = document.getElementById('addMoneyBonusMessage'); const confirmBtnAddMoney = document.getElementById('confirmAddMoneyBtn'); const customAmountInputEl = document.getElementById('customAmountInput');
  function openModal() { if (!currentUser) { alert('Please login first!'); return; } modalBg.style.display = 'flex'; customAmountInputEl.value = ''; confirmBtnAddMoney.disabled = true; addMoneyBonusMessageEl.style.display = 'none'; document.body.style.overflow = 'hidden'; }
  customAmountInputEl.addEventListener('input', () => { const amount = parseFloat(customAmountInputEl.value); if (!isNaN(amount) && amount >= MIN_ADD_AMOUNT) { confirmBtnAddMoney.disabled = false; selectedAmount = amount; addMoneyBonusMessageEl.style.display = amount >= 100 ? 'flex' : 'none'; } else { confirmBtnAddMoney.disabled = true; selectedAmount = null; addMoneyBonusMessageEl.style.display = 'none'; } });
  function closeModal() { modalBg.style.display = 'none'; document.body.style.overflow = dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden'; }
  function confirmAdd() { if (selectedAmount === null || selectedAmount < MIN_ADD_AMOUNT) { showGenericError("Invalid Amount", `Please enter an amount greater than or equal to ৳${MIN_ADD_AMOUNT}.`); return; } if (!currentUser) { showGenericError("Error", "User not logged in."); return; } closeModal(); document.getElementById('paymentOptionsModal').style.display = 'flex'; document.body.style.overflow = 'hidden'; }
  function closePaymentOptionsModal() { document.getElementById('paymentOptionsModal').style.display = 'none'; document.body.style.overflow = dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden'; }
  function showPaymentGateway(method) { currentPaymentMethod = method; const titleEl = document.getElementById('paymentGatewayTitle'); const instructionsEl = document.getElementById('paymentGatewayInstructions'); document.getElementById('paymentTransactionIdInput').value = ''; let instructions = ""; let methodTitle = ""; const recipientNumber = "01647712206"; const amountToPay = selectedAmount; const invoiceId = "T3IFH0046869"; let logoUrl = ""; switch (method) { case 'bkash': logoUrl = "https://i.ibb.co/MDBmC2D/bkash-logo-from-crop.png"; methodTitle = "Bkash Payment"; instructions = `<p><strong>ইনভয়েস আইডি: ${invoiceId} (KILLERX X OFFICIAL)</strong></p><p><strong>টাকার পরিমাণ: ৳${amountToPay}.00</strong></p><hr><p>*247# ডায়াল করে আপনার BKASH মোবাইল মেনুতে যান অথবা BKASH অ্যাপে যান।</p><p>"Send Money"-এ ক্লিক করুন।</p><p>প্রাপক নম্বর হিসেবে এই নম্বরটি লিখুন: <strong>${recipientNumber}</strong> <button onclick="copyToClipboard('${recipientNumber}')" style="background:var(--primary);color:white;border:none;padding:3px 8px;border-radius:5px;cursor:pointer;font-size:12px;margin-left:5px;"><i class="fas fa-copy"></i> Copy</button></p><p>টাকার পরিমাণ: ৳${amountToPay}.00</p><p>নিশ্চিত করতে এখন আপনার BKASH মোবাইল মেনু পিন লিখুন।</p><p> সবকিছু ঠিক থাকলে, আপনি BKASH থেকে একটি নিশ্চিতকরণ বার্তা পাবেন।</p><p>এখন উপরের বক্সে আপনার <strong>Transaction ID</strong> দিন এবং নিচের <strong>Submit</strong> বাটনে ক্লিক করুন।</p>`; break; case 'nagad': logoUrl = "https://i.ibb.co/QmMScQd/nagad-logo-from-crop.png"; methodTitle = "Nagad Payment"; instructions = `<p><strong>ইনভয়েস আইডি: ${invoiceId} (KILLERX X OFFICIAL)</strong></p><p><strong>টাকার পরিমাণ: ৳${amountToPay}.00</strong></p><hr><p>*167# ডায়াল করে আপনার NAGAD মোবাইল মেনুতে যান অথবা NAGAD অ্যাপে যান।</p><p>"Send Money"-এ ক্লিক করুন।</p><p>প্রাপক নম্বর হিসেবে এই নম্বরটি লিখুন: <strong>${recipientNumber}</strong> <button onclick="copyToClipboard('${recipientNumber}')" style="background:var(--primary);color:white;border:none;padding:3px 8px;border-radius:5px;cursor:pointer;font-size:12px;margin-left:5px;"><i class="fas fa-copy"></i> Copy</button></p><p>টাকার পরিমাণ: ৳${amountToPay}.00</p><p>নিশ্চিত করতে এখন আপনার NAGAD মোবাইল মেনু পিন লিখুন।</p><p>সবকিছু ঠিক থাকলে, আপনি NAGAD থেকে একটি নিশ্চিতকরণ বার্তা পাবেন।</p><p>এখন উপরের বক্সে আপনার <strong>Transaction ID</strong> দিন এবং নিচের <strong>Submit</strong> বাটনে ক্লিক করুন।</p>`; break; case 'rocket': logoUrl = "https://i.ibb.co/bQx5QfD/rocket-logo-from-crop.png"; methodTitle = "Rocket Payment"; instructions = `<p><strong>ইনভয়েস আইডি: ${invoiceId} (KILLERX X OFFICIAL)</strong></p><p><strong>টাকার পরিমাণ: ৳${amountToPay}.00</strong></p><hr><p>*322# ডায়াল করে আপনার ROCKET মোবাইল মেনুতে যান অথবা ROCKET অ্যাপে যান।</p><p>"Send Money"-এ ক্লিক করুন।</p><p>প্রাপক নম্বর হিসেবে এই নম্বরটি লিখুন: <strong>${recipientNumber}</strong> <button onclick="copyToClipboard('${recipientNumber}')" style="background:var(--primary);color:white;border:none;padding:3px 8px;border-radius:5px;cursor:pointer;font-size:12px;margin-left:5px;"><i class="fas fa-copy"></i> Copy</button></p><p>টাকার পরিমাণ: ৳${amountToPay}.00</p><p>নিশ্চিত করতে এখন আপনার ROCKET মোবাইল মেনু পিন লিখুন।</p><p>সবকিছু ঠিক থাকলে, আপনি ROCKET থেকে একটি নিশ্চিতকরণ বার্তা পাবেন।</p><p>এখন উপরের বক্সে আপনার <strong>Transaction ID</strong> দিন এবং নিচের <strong>Submit</strong> বাটনে ক্লিক করুন।</p>`; break; } titleEl.innerHTML = `<img src="${logoUrl}" alt="${method}" style="width: 24px; height: 24px; margin-right: 10px; vertical-align: middle;"> ${methodTitle}`; instructionsEl.innerHTML = instructions; document.getElementById('paymentOptionsModal').style.display = 'none'; document.getElementById('paymentGatewayModal').style.display = 'flex'; document.body.style.overflow = 'hidden'; }
  function closePaymentGatewayModal() { document.getElementById('paymentGatewayModal').style.display = 'none'; document.getElementById('paymentOptionsModal').style.display = 'flex'; }
  async function submitPaymentTransactionId() { if (!currentUser || selectedAmount === null || selectedAmount < MIN_ADD_AMOUNT || !currentPaymentMethod) { showGenericError("Error", "Session expired or invalid data. Please try again."); return; } const paymentTxnId = document.getElementById('paymentTransactionIdInput').value.trim(); if (!paymentTxnId) { showGenericError("Input Required", "Please enter the Transaction ID."); return; } const submitBtn = document.getElementById('submitPaymentTxnBtn'); submitBtn.disabled = true; submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...'; try { const allTransactionsRef = database.ref('all_transactions/' + paymentTxnId); const snapshot = await allTransactionsRef.once('value'); if (snapshot.exists()) { showGenericError("Duplicate Transaction ID", "This Transaction ID has already been submitted. Please check and try again or contact support if you believe this is an error."); submitBtn.disabled = false; submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Transaction ID'; return; } const userTransactionsRef = database.ref('transactions/' + currentUser); const newTransactionRef = userTransactionsRef.push(); const transactionKey = newTransactionRef.key; const transactionData = { amount: selectedAmount, status: "pending_verification", date: new Date().toISOString(), userId: currentUser, paymentMethod: currentPaymentMethod, paymentTransactionId: paymentTxnId, transactionKey: transactionKey }; const allTransactionEntry = { userId: currentUser, amount: selectedAmount, date: new Date().toISOString(), status: "pending_verification", paymentMethod: currentPaymentMethod, originalUserTransactionKey: transactionKey, userEnteredTxnId: paymentTxnId }; const updates = {}; updates['transactions/' + currentUser + '/' + transactionKey] = transactionData; updates['all_transactions/' + paymentTxnId] = allTransactionEntry; await database.ref().update(updates); showGenericSuccess("Submission Successful!", "Your transaction ID has been submitted. Please wait for admin to verify your payment and credit your account. This may take some time."); document.getElementById('paymentGatewayModal').style.display = 'none'; document.getElementById('paymentOptionsModal').style.display = 'none'; document.body.style.overflow = dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden'; confirmBtnAddMoney.disabled = true; customAmountInputEl.value = ''; selectedAmount = null; currentPaymentMethod = null; } catch (error) { console.error("Error submitting transaction ID:", error); showGenericError("Submission Failed", "An error occurred: " + error.message + ". Please try again."); } finally { if(submitBtn){ submitBtn.disabled = false; submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Transaction ID'; } } }
  function copyToClipboard(text) { navigator.clipboard.writeText(text).then(() => { showGenericSuccess("Copied!", "Number copied to clipboard."); }).catch(err => { showGenericError("Copy Failed!", "Could not copy text: " + err); }); }
  function showGenericSuccess(title, message) { document.getElementById('genericSuccessMessage').textContent = message; document.querySelector('#genericSuccessModal h2').innerHTML = `<i class="fas fa-check-circle"></i> ${title}`; document.getElementById('genericSuccessModal').style.display = 'flex'; document.body.style.overflow = 'hidden'; }
  function closeGenericSuccessModal() { document.getElementById('genericSuccessModal').style.display = 'none'; document.body.style.overflow = dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden'; }
  function showGenericError(title, message) { document.getElementById('genericErrorMessage').textContent = message; document.querySelector('#genericErrorModal h2').innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${title}`; document.getElementById('genericErrorModal').style.display = 'flex'; document.body.style.overflow = 'hidden'; }
  function closeGenericErrorModal() { document.getElementById('genericErrorModal').style.display = 'none'; document.body.style.overflow = dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden'; }
  function showHistory() { if (!currentUser) return; const hModal = document.getElementById('historyModal'), hList = document.getElementById('historyList'); hList.innerHTML = `<div class="empty-history"><i class="fas fa-spinner fa-spin"></i><p>Loading ...</p></div>`; hModal.style.display = 'flex'; document.body.style.overflow = 'hidden'; transactionListener = database.ref('transactions/' + currentUser).orderByChild('date').on('value', s => { const txns = s.val(); hList.innerHTML = ''; if (!txns || Object.keys(txns).length === 0) { hList.innerHTML = `<div class="empty-history"><i class="fas fa-hourglass-half"></i><p>No transactions</p></div>`; return; } Object.entries(txns).map(([id,tx])=>({id,...tx})).sort((a,b)=>new Date(b.date)-new Date(a.date)).forEach(tx => { const el = document.createElement('div'); el.className = `transaction-item status-${tx.status.replace(/\s+/g, '_')}`; const dt = new Date(tx.date); let paymentDetails = ""; if (tx.paymentMethod && tx.paymentTransactionId) { paymentDetails = `<div style="font-size: 11px; color: ${el.classList.contains('status-pending_verification') || el.classList.contains('status-pending') ? 'rgba(45,52,54,0.8)' : 'rgba(255,255,255,0.6)'}; margin-top: 3px; text-transform: capitalize;">Method: ${tx.paymentMethod} | TxnID: ${tx.paymentTransactionId}</div>`; } let statusIcon = 'fa-hourglass-half'; if (tx.status === 'completed') statusIcon = 'fa-check-circle'; else if (tx.status === 'pending_verification') statusIcon = 'fa-user-clock'; else if (tx.status === 'failed' || tx.status === 'cancelled') statusIcon = 'fa-times-circle'; el.innerHTML = `<div class="transaction-left"><div class="transaction-icon"><i class="fas ${statusIcon}"></i></div><div class="transaction-info"><div class="transaction-amount-status"><span class="transaction-amount">${tx.amount} Taka</span><span class="transaction-status" style="${tx.status === 'pending_verification' || tx.status === 'pending' ? 'color: var(--dark); font-weight: 500;' : (tx.status === 'completed' ? 'color: var(--success);' : '')}">${tx.status.replace('_', ' ')}</span></div><div class="transaction-date">${dt.toLocaleDateString()+' '+dt.toLocaleTimeString()}</div>${paymentDetails}</div></div><div class="transaction-right"><i class="fas fa-chevron-right"></i></div>`; hList.appendChild(el); }); }, e => { hList.innerHTML = `<div class="empty-history"><i class="fas fa-exclamation-triangle"></i><p>Failed to load</p></div>`; console.error('History error:', e); }); }
  function closeHistoryModal() { if (transactionListener&&currentUser) database.ref('transactions/'+currentUser).off('value',transactionListener); transactionListener=null; document.getElementById('historyModal').style.display='none'; document.body.style.overflow= dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden';}
  function showNotifications() { if(!currentUser)return; const modal=document.getElementById('notificationModal'),list=document.getElementById('notificationList');modal.style.display='flex';document.body.style.overflow='hidden';list.innerHTML=`<p style="text-align:center;">Loading...</p>`; firebase.database().ref('notifications/'+currentUser).once('value').then(s=>{const d=s.val();if(!d){list.innerHTML='<p style="text-align:center;">No notifications.</p>';return}list.innerHTML='';Object.entries(d).map(([id,n])=>({id,...n})).sort((a,b)=>b.timestamp-a.timestamp).forEach(n=>{const dv=document.createElement('div');dv.className='transaction-item';dv.innerHTML=`<div class="transaction-left" style="text-align:left;gap:10px"><div class="transaction-icon"><i class="fas fa-${n.read?'envelope-open':'envelope'}"></i></div><div class="transaction-info"><div style="font-size:16px;font-weight:500">${n.message}</div><div style="font-size:12px;color:rgba(255,255,255,0.7)">${new Date(n.timestamp).toLocaleString()}</div></div></div><div class="transaction-right" style="opacity:0"></div>`;list.appendChild(dv)})}) }
  function closeNotificationModal(){document.getElementById('notificationModal').style.display='none';document.body.style.overflow= dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden';}
  function markAllNotificationsRead(){if(!currentUser)return;firebase.database().ref('notifications/'+currentUser).remove().then(()=>{document.getElementById('notifCount').textContent=0;const nl=document.getElementById('notificationList');nl.innerHTML='<p style="text-align:center;color:var(--success)">All marked as read!</p>';setTimeout(()=>showNotifications(),1500)}).catch(e=>{console.error("Error marking all read:",e);alert("Failed to mark all.")})}
  let refreshInterval=setInterval(()=>{if(!currentUser)return;firebase.database().ref('notifications/'+currentUser).once('value').then(s=>{const n=s.val()||{};document.getElementById('notifCount').textContent=Object.keys(n).length});const hm=document.getElementById('historyModal');if(hm&&hm.style.display==='flex'){firebase.database().ref('transactions/'+currentUser).orderByChild('date').once('value').then(s=>{const hl=document.getElementById('historyList'),tx=s.val();hl.innerHTML='';if(!tx||Object.keys(tx).length===0){hl.innerHTML=`<div class="empty-history"><i class="fas fa-hourglass-half"></i><p>No transactions</p></div>`;return}Object.entries(tx).map(([id,t])=>({id,...t})).sort((a,b)=>new Date(b.date)-new Date(a.date)).forEach(t=>{const te=document.createElement('div');te.className=`transaction-item status-${t.status.replace(/\s+/g, '_')}`;const d=new Date(t.date);let pD="";if(t.paymentMethod&&t.paymentTransactionId)pD=`<div style="font-size:11px;color:${te.classList.contains('status-pending_verification')||te.classList.contains('status-pending')?'rgba(45,52,54,0.8)':'rgba(255,255,255,0.6)'};margin-top:3px;text-transform:capitalize;">Method: ${t.paymentMethod} | TxnID: ${t.paymentTransactionId}</div>`;let sI='fa-hourglass-half';if(t.status==='completed')sI='fa-check-circle';else if(t.status==='pending_verification')sI='fa-user-clock';else if(t.status==='failed'||t.status==='cancelled')sI='fa-times-circle';te.innerHTML=`<div class="transaction-left"><div class="transaction-icon"><i class="fas ${sI}"></i></div><div class="transaction-info"><div class="transaction-amount-status"><span class="transaction-amount">${t.amount} Taka</span><span class="transaction-status" style="${t.status==='pending_verification'||t.status==='pending'?'color:var(--dark);font-weight:500;':(t.status==='completed'?'color:var(--success);':'')}">${t.status.replace('_',' ')}</span></div><div class="transaction-date">${d.toLocaleDateString()+' '+d.toLocaleTimeString()}</div>${pD}</div></div><div class="transaction-right"><i class="fas fa-chevron-right"></i></div>`;hl.appendChild(te)})})}},10000);
  function openHWIDPopup(){if(!currentUser)return;firebase.database().ref('users/'+currentUser).once('value').then(s=>{const ud=s.val()||{},fr=ud.resetFreeUsed===true,m=document.getElementById('hwidResetModal');m.style.display='flex';document.body.style.overflow='hidden';const msg=m.querySelector('.hwid-message'),cb=m.querySelector('.confirm-hwid-btn');if(fr){msg.innerHTML='আপনার ফ্রি HW ID রিসেট সুযোগ শেষ। এখন ৩০০ কয়েন লাগবে। রিসেট করতে চান?';cb.innerHTML='<i class="fas fa-check-circle"></i> RESET (300 Coins)'}else{msg.innerHTML='আপনি প্রথমবার ফ্রিতে HW ID রিসেট করতে পারবেন। রিসেট করতে চান?';cb.innerHTML='<i class="fas fa-check-circle"></i> RESET (Free)'}})}
  function confirmHWIDReset(){if(!currentUser)return;firebase.database().ref('users/'+currentUser).once('value').then(s=>{const ud=s.val()||{},bl=ud.balance||0,fr=ud.resetFreeUsed===true;if(!fr){firebase.database().ref('users/'+currentUser).update({resetFreeUsed:true, machineId: null}).then(()=>{document.getElementById('machineId').textContent='N/A';document.getElementById('hwidResetModal').style.display='none';document.getElementById('hwidSuccessModal').style.display='flex'})}else if(bl>=300){firebase.database().ref('users/'+currentUser).update({balance:bl-300, machineId: null}).then(()=>{document.getElementById('machineId').textContent='N/A';document.getElementById('hwidResetModal').style.display='none';document.getElementById('hwidSuccessModal').style.display='flex'})}else{document.getElementById('hwidResetModal').style.display='none';document.getElementById("hwidErrorTextContent").textContent=`আপনার ব্যালেন্সে HW ID রিসেট করার জন্য পর্যাপ্ত কয়েন (300৳) নেই। আপনার বর্তমান ব্যালেন্স: ${bl}৳।`;document.getElementById('hwidErrorModal').style.display='flex'}})}
  function openToolsModal(){if(!currentUser){alert('Please login first!');return}const m=document.getElementById('toolsModal'),l=document.getElementById('toolsList');m.style.display='flex';document.body.style.overflow='hidden';l.innerHTML=`<p style="text-align:center;">Loading tools...</p>`;database.ref('Tools').once('value').then(s=>{const d=s.val();l.innerHTML='';if(!d||Object.keys(d).length===0){l.innerHTML='<p style="text-align:center;opacity:0.7">No tools available.</p>';return}Object.entries(d).forEach(([tn,tv])=>{const b=document.createElement('button');let ih='<i class="fas fa-download"></i>';if(tn.toLowerCase().includes('bluestacks'))ih='<i class="fab fa-android"></i>';else if(tn.toLowerCase().includes('free fire'))ih='<i class="fas fa-fire"></i>';else if(tn.toLowerCase().includes('msi'))ih='<i class="fas fa-laptop"></i>';else if(tn.toLowerCase().includes('requirement'))ih='<i class="fas fa-info-circle"></i>';b.innerHTML=`${ih} ${tn}`;b.onclick=()=>handleToolClick(tn,tv);l.appendChild(b)})}).catch(e=>{l.innerHTML=`<p style="text-align:center;color:var(--danger)">Failed to load tools.</p>`;console.error('Failed to load tools:',e)})}
  function handleToolClick(tn,tv){if(tv&&(tv.startsWith('http://')||tv.startsWith('https://')))window.open(tv,'_blank');else if(tv)alert(`${tn}: ${tv}`);else alert(`No information for ${tn}.`)}
  function closeToolsModal(){document.getElementById('toolsModal').style.display='none';document.body.style.overflow= dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden';}
  async function redeemCode() { const codeInput = document.getElementById("redeemCodeInput"); const code = codeInput.value.trim(); if (!code || !currentUser) return; try { const snapshot = await firebase.database().ref("redeemCodes/" + code).once("value"); if (!snapshot.exists() || snapshot.val().redeemed) { document.getElementById("redeemErrorText").textContent = "কোডটি সঠিক নয় অথবা ইতিমধ্যে ব্যবহৃত হয়েছে।"; document.getElementById("redeemErrorModal").style.display = "flex"; return; } const redeemData = snapshot.val(); let isBalanceCode = redeemData.amount !== undefined && redeemData.amount > 0; let isTimeCode = redeemData.days !== undefined || redeemData.hours !== undefined || redeemData.minutes !== undefined || redeemData.totalTime !== undefined; if (!isBalanceCode && !isTimeCode) { document.getElementById("redeemErrorText").textContent = "রিডিম কোড ডেটা অসম্পূর্ণ অথবা অজানা প্রকার।"; document.getElementById("redeemErrorModal").style.display = "flex"; return; } const userRef = firebase.database().ref("users/" + currentUser); const userSnap = await userRef.once("value"); const userData = userSnap.val() || {}; let updateData = {}; let successMessage = ""; let amountAddedToBalanceForBonus = 0; if (isBalanceCode) { const reward = redeemData.amount || 0; amountAddedToBalanceForBonus = reward; updateData.balance = (userData.balance || 0) + reward; successMessage = `আপনি সফলভাবে ৳${reward} রিডিম করেছেন।`; } else if (isTimeCode) { let durationMs = 0; if (redeemData.totalTime !== undefined && typeof redeemData.totalTime === 'number') durationMs = redeemData.totalTime * 1000; else durationMs = ((redeemData.days||0)*86400000)+((redeemData.hours||0)*3600000)+((redeemData.minutes||0)*60000); let currentExpiry = new Date(userData.expiryDate); if (isNaN(currentExpiry.getTime()) || currentExpiry.getTime() < Date.now()) currentExpiry = new Date(); updateData.expiryDate = new Date(currentExpiry.getTime() + durationMs).toISOString(); let timeParts=[]; const rd=redeemData.days||0,rh=redeemData.hours||0,rm=redeemData.minutes||0; if(rd>0)timeParts.push(`${rd} দিন`); if(rh>0)timeParts.push(`${rh} ঘন্টা`); if(rm>0)timeParts.push(`${rm} মিনিট`); if(timeParts.length===0&&durationMs>0)timeParts.push(`${(durationMs/86400000).toFixed(0)} দিন`); else if(timeParts.length===0&&durationMs===0)timeParts.push("কোনো সময়"); successMessage = `আপনার মেয়াদের সাথে সফলভাবে ${timeParts.join(', ')} যোগ করা হয়েছে।`; } await userRef.update(updateData); if (isBalanceCode && amountAddedToBalanceForBonus > 0) await handleBonusAfterDeposit(currentUser, amountAddedToBalanceForBonus); await firebase.database().ref("redeemCodes/" + code).update({ redeemed: true, redeemedBy: currentUser, redeemedDate: new Date().toISOString() }); document.getElementById("redeemRewardText").textContent = successMessage; document.getElementById("redeemSuccessModal").style.display = "flex"; codeInput.value = ""; } catch (error) { console.error("Redeem code processing error:", error); document.getElementById("redeemErrorText").textContent = "রিডিম কোড প্রক্রিয়া করতে সমস্যা হয়েছে।"; document.getElementById("redeemErrorModal").style.display = "flex"; } }
  const packageOffers = [{id:'pkg30',title:'Basic Package',days:30,price:150, description: "Get 30 days of premium access."},{id:'pkg60',title:'Standard Package',days:60,price:300, description: "Enjoy 60 days of uninterrupted service."},{id:'pkg90',title:'Pro Package',days:90,price:430, description: "Unlock 90 days with our Pro package."},{id:'pkg180',title:'Elite Package',days:180,price:800, description: "The best value: 180 days of Elite access."}];
  function openStore(){if(!currentUser){alert('Please login first!');return}document.getElementById("storeModal").style.display="flex";document.body.style.overflow='hidden';loadPackageRenewOptions()}
  function closeStoreModal(){document.getElementById('storeModal').style.display='none';document.body.style.overflow= dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden';}
  function loadPackageRenewOptions(){const l=document.getElementById("packageRenewList");l.innerHTML=`<div class="empty-history"><i class="fas fa-spinner fa-spin"></i><p>Loading...</p></div>`;l.innerHTML="";let c=0;if(packageOffers.length===0){l.innerHTML="<div class='empty-history'><i class='fas fa-box'></i><p>No packages.</p></div>";return}[...packageOffers].sort((a,b)=>a.days-b.days).forEach(p=>{c++;const crd=document.createElement("div");crd.className="package-item";crd.onclick=()=>openPackageDetailModal(p);crd.innerHTML=`<div class="package-info"><div class="package-title">${p.title||`${p.days} Days Package`}</div><div class="package-duration">${p.days} Days Validity</div></div><div class="package-price">${p.price}৳</div>`;l.appendChild(crd)});if(c===0)l.innerHTML="<div class='empty-history'><i class='fas fa-box'></i><p>No packages.</p></div>"}
  function openPackageDetailModal(p){selectedPackageForPurchase=p;const m=document.getElementById('packageDetailModal');document.getElementById('detailPackageTitle').textContent=p.title||`${p.days} Days Package`;document.getElementById('detailPackagePrice').textContent=`Price: ${p.price}৳`;document.getElementById('detailPackageDescription').textContent= p.description || `আপনার একাউন্টে ${p.days} দিনের মেয়াদ যোগ করতে এই প্যাকেজটি কিনুন।`;document.getElementById('buyPackageButton').onclick=()=>confirmRenewPurchase(p);m.style.display='flex';document.body.style.overflow='hidden'}
  function closePackageDetailModal(){document.getElementById('packageDetailModal').style.display='none'; }
  function confirmRenewPurchase(p){if(!currentUser){alert('Login first!');return}selectedPackageForPurchase=p;const m=document.getElementById('renewConfirmationModal');document.getElementById('confirmRenewMessage').innerHTML=`আপনি কি নিশ্চিত যে আপনি **${p.title||`${p.days} দিনের প্যাকেজ`}** এই প্যাকেজটি **${p.price}৳** দিয়ে কিনতে চান?`;document.getElementById('confirmRenewFinalButton').onclick=()=>executeRenewPurchase(p);m.style.display='flex'; document.getElementById('packageDetailModal').style.display='none'; document.body.style.overflow='hidden';}
  function closeRenewConfirmationModal(){document.getElementById('renewConfirmationModal').style.display='none'; document.body.style.overflow= dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden';}
  function generateRandomCode(l){const c='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let r='';for(let i=0;i<l;i++)r+=c.charAt(Math.floor(Math.random()*c.length));return r}
  async function executeRenewPurchase(p){if(!currentUser||!p){alert('Purchase failed');closeRenewConfirmationModal();return}closeRenewConfirmationModal();const ur=firebase.database().ref('users/'+currentUser);try{const s=await ur.once('value'),ud=s.val(),cb=ud.balance||0,pr=p.price;if(cb>=pr){await ur.update({balance:cb-pr});const rc=generateRandomCode(10),rd={code:rc,days:p.days,totalTime:p.days*86400,amount:0,redeemed:false,generatedFor:currentUser,generatedOn:new Date().toISOString(),purchasedPrice:pr,packageName:p.title||`${p.days} Days Package`};await firebase.database().ref('redeemCodes/'+rc).set(rd);document.getElementById('generatedRedeemCode').textContent=rc;document.getElementById('purchaseSuccessModal').style.display='flex';closeStoreModal(); const uus=await ur.once('value');if(uus.exists())showDashboardUI(currentUser,uus.val())}else{document.getElementById("hwidErrorTextContent").textContent=`আপনার ব্যালেন্সে ${p.title||`${p.days} দিনের প্যাকেজ`} কেনার জন্য পর্যাপ্ত (${pr}৳) নেই। ব্যালেন্স: ${cb}৳।`;document.getElementById("hwidErrorModal").style.display="flex"}}catch(e){console.error("Purchase failed:",e);document.getElementById("hwidErrorTextContent").textContent="কেনাকাটা সম্পূর্ণ করতে সমস্যা হয়েছে।";document.getElementById("hwidErrorModal").style.display="flex"}}
  function copyRedeemCode(){const el=document.getElementById('generatedRedeemCode'),c=el.textContent;navigator.clipboard.writeText(c).then(()=>{const ot=el.textContent;el.textContent="Copied!";setTimeout(()=>el.textContent=ot,1500)}).catch(e=>{console.error('Failed to copy:',e);alert('Failed to copy. Manual: '+c)})}
  function closePurchaseSuccessModal(){document.getElementById('purchaseSuccessModal').style.display='none';document.body.style.overflow= dashboardPanel.style.display === 'flex' ? 'auto' : 'hidden';}
  const bonusMilestones = [{added:0,bonusPayout:0,currency:"৳"},{added:100,bonusPayout:20,currency:"৳"},{added:500,bonusPayout:100,currency:"৳"},{added:1000,bonusPayout:250,currency:"৳"},{added:3000,bonusPayout:500,currency:"৳"},{added:5000,bonusPayout:1000,currency:"৳"}]; bonusMilestones.sort((a,b)=>a.added-b.added);
  function initializeBonusSystemUI(){const pb=document.querySelector('.bonus-progress-bar');if(!pb)return;pb.innerHTML='';bonusMilestones.forEach(m=>{const i=document.createElement('div');i.classList.add('milestone-item');i.id=`milestone-${m.added}`;i.innerHTML=`<div class="milestone-marker"><i class="fas fa-lock"></i><span>${m.currency}${m.added}</span></div><span class="milestone-bonus-text">বোনাস ${m.currency}${m.bonusPayout}</span>`;pb.appendChild(i)})}
  function displayBonusSystem(ud){ if(!document.querySelector('.bonus-system-container'))return; const ta=ud.totalAddedForBonus||0,ab=ud.accumulatedBonus||0,rb=ud.recentBonusAmount||0; document.getElementById('totalAddedForBonusDisplay').textContent=`৳${ta.toLocaleString()}`; document.getElementById('accumulatedBonusDisplay').textContent=`৳${ab.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}`; document.getElementById('recentBonusDisplay').textContent=`৳${rb.toLocaleString()}`; let nmf=false;document.getElementById('nextBonusMetaDisplay').textContent='সম্পন্ন'; bonusMilestones.forEach(m=>{ const me=document.getElementById(`milestone-${m.added}`); if(me){ if(ta>=m.added){me.classList.add('unlocked');me.querySelector('.milestone-marker i').classList.replace('fa-lock','fa-unlock-alt')} else{me.classList.remove('unlocked');me.querySelector('.milestone-marker i').classList.replace('fa-unlock-alt','fa-lock'); if(!nmf){document.getElementById('nextBonusMetaDisplay').textContent=`৳${m.added.toLocaleString()}`;nmf=true}} } }); const cbBtn=document.querySelector('.claim-bonus-btn');if(cbBtn)cbBtn.disabled=ab<=0 }
  async function handleBonusAfterDeposit(userId, amountJustDeposited) { const userRef = database.ref('users/' + userId); try { const snapshot = await userRef.once('value'); let userData = snapshot.val() || {}; userData.totalAddedForBonus = userData.totalAddedForBonus || 0; userData.accumulatedBonus = userData.accumulatedBonus || 0; userData.lastBonusMilestoneAchieved = userData.lastBonusMilestoneAchieved !== undefined ? userData.lastBonusMilestoneAchieved : -1; userData.recentBonusAmount = userData.recentBonusAmount || 0; const newTotalAddedForBonus = userData.totalAddedForBonus + amountJustDeposited; let bonusAmountNewlyEarnedThisDeposit = 0; let highestMilestoneAchievedInThisDepositValue = userData.lastBonusMilestoneAchieved; for (const currentMilestone of bonusMilestones) { if (newTotalAddedForBonus >= currentMilestone.added) { highestMilestoneAchievedInThisDepositValue = currentMilestone.added; } else { break; } } let totalPayoutAtNewHighest = 0; const newHighestMilestoneData = bonusMilestones.find(m => m.added === highestMilestoneAchievedInThisDepositValue); if (newHighestMilestoneData) { totalPayoutAtNewHighest = newHighestMilestoneData.bonusPayout; } let totalPayoutAtOldRecorded = 0; const oldRecordedMilestoneData = bonusMilestones.find(m => m.added === userData.lastBonusMilestoneAchieved); if (oldRecordedMilestoneData) { totalPayoutAtOldRecorded = oldRecordedMilestoneData.bonusPayout; } bonusAmountNewlyEarnedThisDeposit = totalPayoutAtNewHighest - totalPayoutAtOldRecorded; if (bonusAmountNewlyEarnedThisDeposit < 0) { bonusAmountNewlyEarnedThisDeposit = 0; } const updates = { totalAddedForBonus: newTotalAddedForBonus, accumulatedBonus: userData.accumulatedBonus + bonusAmountNewlyEarnedThisDeposit, lastBonusMilestoneAchieved: highestMilestoneAchievedInThisDepositValue, recentBonusAmount: bonusAmountNewlyEarnedThisDeposit > 0 ? bonusAmountNewlyEarnedThisDeposit : userData.recentBonusAmount }; if (bonusAmountNewlyEarnedThisDeposit > 0 || amountJustDeposited > 0) { await userRef.update(updates); } } catch (error) { console.error("Error in handleBonusAfterDeposit:", error); } }
  async function claimBonus(){ if(!currentUser)return; const ur=database.ref('users/'+currentUser); try{ const s=await ur.once('value'),ud=s.val(); if(ud&&ud.accumulatedBonus>0){ const cb=ud.balance||0,btc=ud.accumulatedBonus; await ur.update({balance:cb+btc,accumulatedBonus:0,recentBonusAmount:0}); showGenericSuccess("Bonus Claimed!",`৳${btc.toLocaleString()} বোনাস আপনার মূল ব্যালেন্সে যোগ করা হয়েছে!`); }else { showGenericError("No Bonus", "আপনার সংগ্রহ করার মতো কোনো বোনাস নেই।"); } }catch(e){console.error("Error claiming bonus:",e); showGenericError("Claim Failed", "বোনাস সংগ্রহ করতে সমস্যা হয়েছে।")} }

</script>
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAueM2O16GbLJX4TmfK7g8IZyFJRMdh1WE",
    authDomain: "ng-mods-x2.firebaseapp.com",
    databaseURL: "https://ng-mods-x2-default-rtdb.firebaseio.com",
    projectId: "ng-mods-x2",
    storageBucket: "ng-mods-x2.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);

  function signInWithGoogle() {
      console.log("Google Sign-In clicked");
    const provider = new firebase.auth.GoogleAuthProvider();
    console.log('Attempting popup...'); firebase.auth().signInWithPopup(provider)
      .then(result => {
        console.log("Google login success", result.user);
        const name = result.user.displayName;
        const uid = result.user.uid;

        // Store Gmail name as user ID
        currentUser = name.toLowerCase().replace(/\s+/g, '');
        localStorage.setItem('currentUser', currentUser);

        const dbRef = firebase.database().ref('users/' + currentUser);
        dbRef.once('value').then(snapshot => {
          if (snapshot.exists()) {
            showDashboardUI(currentUser, snapshot.val());
          } else {
            document.getElementById('authError').textContent = 'No account found for ' + name;
          }
        }).catch(e => {
          document.getElementById('authError').textContent = 'Login error occurred.';
          console.error(e);
        });
      })
      .catch(error => {
        console.error('Sign-in error:', error); document.getElementById('authError').textContent = error.message;
      });
  }
</script>
</body>
</html>